{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/MySaleList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/MySaleList.vue","mtime":1574426289000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvc2lsYW4vRGVza3RvcC9jb2RlL2NvZGUvcGFydFRpbWUvd2luZS9zdm5hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFNhbGVDYXJkIGZyb20gIi4uL2NvbXBvbmVudHMvU2FsZUNhcmQiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgU2FsZUNhcmQ6IFNhbGVDYXJkCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIG1lbnVMaXN0OiBbewogICAgICAgIHRpdGxlOiAn5Y+v5a+E5ZSuJwogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICflr4TllK7kuK0nCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogJ+W3suWUruWujCcKICAgICAgfV0sCiAgICAgIGFjdGl2ZTogMCwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgc3RhcnQ6IDAsCiAgICAgIGxpbWl0OiAxMCwKICAgICAgdG90YWw6IDAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBxdWVyeVNhbGVMaXN0OiBmdW5jdGlvbiBxdWVyeVNhbGVMaXN0KCkgewogICAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0LAogICAgICAgICAgbGltaXQgPSB0aGlzLmxpbWl0OwoKICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZSkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdteVNhbGVMaXN0JywgewogICAgICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgICAgIGxpbWl0OiBsaW1pdAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CgogICAgICAgIGNhc2UgMToKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdteVNhbGluZ0xpc3QnLCB7CiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgICAgbGltaXQ6IGxpbWl0CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ215U2FsZWRMaXN0JywgewogICAgICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgICAgIGxpbWl0OiBsaW1pdAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0sCiAgICAvLyDlr4TllK7mk43kvZwKICAgIGhhbmRsZVNhbGU6IGZ1bmN0aW9uIGhhbmRsZVNhbGUob3JkZXJfaWQpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2hhbmRsZVNhbGUnLCB7CiAgICAgICAgb3JkZXJfaWQ6IG9yZGVyX2lkCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWPlua2iOWvhOWUrgogICAgaGFuZGxlQ2FuY2VsU2FsZTogZnVuY3Rpb24gaGFuZGxlQ2FuY2VsU2FsZShvcmRlcl9pZCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnaGFuZGxlQ2FuY2VsU2FsZScsIHsKICAgICAgICBvcmRlcl9pZDogb3JkZXJfaWQKICAgICAgfSk7CiAgICB9LAogICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgIHRoaXMucXVlcnlTYWxlTGlzdCgpOwogICAgICB0aGlzLnN0YXJ0ICs9IHRoaXMubGltaXQ7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwKICAgIHN3aXRjaFRhYjogZnVuY3Rpb24gc3dpdGNoVGFiKCkgewogICAgICB0aGlzLnJlc2V0UXVlcnkoKTsKICAgIH0sCiAgICByZXNldFF1ZXJ5OiBmdW5jdGlvbiByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnN0YXJ0ID0gMDsKICAgICAgdGhpcy5saXN0ID0gW107IC8vIHRoaXMubGlzdCA9IFtdCiAgICAgIC8vIHRoaXMubG9hZGluZyA9ZmFsc2UKCiAgICAgIHRoaXMucXVlcnlTYWxlTGlzdCgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG15U2FsZUxpc3Q6IGZ1bmN0aW9uIG15U2FsZUxpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5teVNhbGVMaXN0OwogICAgfSwKICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUoKSB7CiAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmUpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICByZXR1cm4gJ3NhbGUnOwoKICAgICAgICBjYXNlIDE6CiAgICAgICAgICByZXR1cm4gJ3NhbGluZyc7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KICAgIH0sCiAgICBzYWxpbmdEYXRhOiBmdW5jdGlvbiBzYWxpbmdEYXRhKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2FsaW5nRGF0YTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzYWxpbmdEYXRhOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZCkgewogICAgICAgIGNvbnNvbGUubG9nKGQpOwoKICAgICAgICBpZiAoZC5kYXRhKSB7CiAgICAgICAgICB0aGlzLnJlc2V0UXVlcnkoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0sCiAgICBteVNhbGVMaXN0OiBmdW5jdGlvbiBteVNhbGVMaXN0KGQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKGQpOwogICAgICB2YXIgbGlzdCA9IGQubGlzdCwKICAgICAgICAgIG51bXMgPSBkLm51bXM7CiAgICAgIGxpc3QgPSBsaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pOwogICAgICAgIGl0ZW0uaW1nID0gX3RoaXMuZm9ybWF0SW1nKGl0ZW0uZ29vZHNfY292ZXIpOwogICAgICAgIGl0ZW0uZ2V0VGltZSA9IF90aGlzLmZvcm1hdERhdGUoaXRlbS5jdGltZSk7CiAgICAgICAgaXRlbS5lbmRUaW1lID0gaXNOYU4oaXRlbS5ldGltZSAqIDEwMDApID8gbnVsbCA6IGl0ZW0uZXRpbWUgKiAxMDAwOwogICAgICAgIGNvbnNvbGUubG9nKGl0ZW0uZW5kVGltZSk7CiAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgIH0pOwogICAgICB0aGlzLmxpc3QgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMubGlzdCksIF90b0NvbnN1bWFibGVBcnJheShsaXN0KSk7CiAgICAgIHRoaXMudG90YWwgPSBudW1zICogMTsKCiAgICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoID49IHRoaXMudG90YWwpIHsKICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QubGVuZ3RoLCB0aGlzLnRvdGFsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0gLy8gYWN0aXZlKGEpIHsKICAgIC8vICAgdGhpcy5yZXNldFF1ZXJ5KCkKICAgIC8vIH0KCiAgfQp9Ow=="},{"version":3,"sources":["MySaleList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"寄售商品\" back=\"1\" />\n    <!-- tabs -->\n    <van-tabs v-model=\"active\" sticky @click=\"switchTab\">\n      <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in menuList\" :key=\"item.title\"></van-tab>\n    </van-tabs>\n    <!-- 列表 -->\n    <div class=\"list pad_container\">\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n        <div class=\"list_item\" v-for=\"item in list\" :key=\"item.order_id\">\n          <SaleCard\n            :type=\"type\"\n            :sale_nums=\"item.sale_nums\"\n            :remain_nums=\"item.remain_nums\"\n            :desc=\"item.goods_attr\"\n            :title=\"item.goods_name\"\n            :img=\"formatImg(item.goods_cover)\"\n            :price=\"item.goods_price\"\n            :nums=\"item.goods_nums\"\n            :id=\"item.order_id\"\n            :total=\"item.total_amount\"\n            @handleSale=\"handleSale\"\n            @handleCancelSale=\"handleCancelSale\"\n          />\n        </div>\n      </van-list>\n    </div>\n  </div>\n</template>\n<script>\nimport SaleCard from '../components/SaleCard'\nexport default {\n  components: {\n    SaleCard\n  },\n  data() {\n    return {\n      list: [],\n      menuList: [{ title: '可寄售' }, { title: '寄售中' }, { title: '已售完' }],\n      active: 0,\n      loading: false,\n      finished: false,\n      start: 0,\n      limit: 10,\n      total: 0\n    }\n  },\n  methods: {\n    querySaleList() {\n      let { start, limit } = this\n      switch (this.active) {\n        case 0:\n          this.$store.dispatch('mySaleList', {\n            start,\n            limit\n          })\n          return\n        case 1:\n          this.$store.dispatch('mySalingList', {\n            start,\n            limit\n          })\n          return\n        case 2:\n          this.$store.dispatch('mySaledList', {\n            start,\n            limit\n          })\n          return\n\n        default:\n          return\n      }\n    },\n    // 寄售操作\n    handleSale(order_id) {\n      this.$store.dispatch('handleSale', {\n        order_id\n      })\n    },\n    // 取消寄售\n    handleCancelSale(order_id) {\n      this.$store.dispatch('handleCancelSale', {\n        order_id\n      })\n    },\n    onLoad() {\n      this.querySaleList()\n      this.start += this.limit\n      this.loading = false\n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.querySaleList()\n    }\n  },\n  computed: {\n    mySaleList() {\n      return this.$store.state.mySaleList\n    },\n    type() {\n      switch (this.active) {\n        case 0:\n          return 'sale'\n        case 1:\n          return 'saling'\n\n        default:\n          return ''\n      }\n    },\n    salingData() {\n      return this.$store.state.salingData\n    }\n  },\n  watch: {\n    salingData:{\n      handler(d){\n      console.log(d)\n      if (d.data ) {\n        this.resetQuery()\n      }\n      },\n      deep:true,\n    },\n    mySaleList(d) {\n      console.log(d)\n      let { list, nums } = d\n      list = list.map(item => {\n        console.log(item)\n        item.img = this.formatImg(item.goods_cover)\n        item.getTime = this.formatDate(item.ctime)\n        item.endTime = isNaN(item.etime * 1000) ? null : item.etime * 1000\n        console.log(item.endTime)\n        return item\n      })\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n        this.finished = true\n        console.log(this.list.length, this.total)\n      } else {\n        this.finished = false\n      }\n    }\n    // active(a) {\n    //   this.resetQuery()\n\n    // }\n  }\n}\n</script>\n<style scoped>\n.header_con {\n  width: 9.5733rem;\n  height: 4.24rem;\n  background-color: rgba(231, 0, 2, 1);\n  background-image: url('../assets/icons/other/bg_d.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  margin: 0.2rem auto;\n}\n.header_con {\n  font-size: 0.4rem;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n.header_con p,\n.header_con div,\nsmall {\n  color: rgba(255, 255, 255, 0.753);\n}\n.list_item {\n  margin-bottom: 0.2rem;\n}\n.header_con .num {\n  color: #fff;\n  font-size: 0.96rem;\n}\n.header_con .right {\n  display: flex;\n  width: 2.0133rem;\n  height: 0.7467rem;\n  border: 0.0267rem solid rgba(255, 255, 255, 1);\n  border-radius: 0.3733rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n}\n.van-tab__pane {\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.1333rem;\n  overflow: hidden;\n  width: 9.6rem;\n  margin: 0.2rem auto;\n}\n.right::before {\n  content: '';\n  display: inline-block;\n  width: 0.4rem;\n  height: 0.4rem;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-image: url('../assets/icons/other/exchange.png');\n}\n.van-cell {\n  background: transparent;\n  padding: 0;\n  margin-bottom: 0.3rem;\n}\n</style>"],"sourceRoot":"src/views"}]}