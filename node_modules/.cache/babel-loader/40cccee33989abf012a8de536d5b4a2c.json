{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/utils/httpRequest.js","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/utils/httpRequest.js","mtime":1574406398000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9zaWxhbi9EZXNrdG9wL2NvZGUvY29kZS9wYXJ0VGltZS93aW5lL3N2bmFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZS9pbmRleC5qcyc7IC8vIGltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJwoKdmFyIGh0dHBSZXEgPSBheGlvcy5jcmVhdGUoKTsKaHR0cFJlcS5kZWZhdWx0cy5iYXNlVVJMID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyAnL2FwaScgOiAiaHR0cHM6Ly9qaGh5LnZzYXBwLmNuL21vYmlsZSI7Cmh0dHBSZXEuZGVmYXVsdHMudGltZW91dCA9IDUwMDA7IC8vIGh0dHBSZXEuZGVmYXVsdHMuaGVhZGVyc1snQ29va2llJ10gPSAnb3BlbmlkPW9PSmlSdUh4ZTFuQ3lFR1F2Y2w4R2swRXhDczAgICcKCmh0dHBSZXEuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOwpodHRwUmVxLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnWC1SZXF1ZXN0ZWQtV2l0aCddID0gJ1hNTEh0dHBSZXF1ZXN0JzsgLy8g6K+35rGC5oum5oiqCgpmdW5jdGlvbiBmb3JNYXREYXRhKGNvbmZpZykgewogIGlmIChjb25maWcuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPT09ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKSB7CiAgICB2YXIgb2JqID0gY29uZmlnLmRhdGE7CiAgICB2YXIgc3RyID0gIiI7CgogICAgZm9yICh2YXIgayBpbiBvYmopIHsKICAgICAgc3RyICs9ICIiLmNvbmNhdChrLCAiPSIpLmNvbmNhdChvYmpba10sICImIik7CiAgICB9CgogICAgc3RyID0gc3RyW3N0ci5sZW5ndGggLSAxXSA9PT0gJyYnID8gc3RyLnNsaWNlKDAsIHN0ci5sZW5ndGggLSAxKSA6IHN0cjsKICAgIGNvbmZpZy5kYXRhID0gc3RyOwogIH0KfQoKaHR0cFJlcS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbmZpZy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnLmhlYWRlcnNzLCBodHRwUmVxLmRlZmF1bHRzLmhlYWRlcnMucG9zdCk7CiAgZm9yTWF0RGF0YShjb25maWcpOwogIHN0b3JlLmNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICBhbGVydCgn572R57uc6ZSZ6K+vJyk7CiAgc3RvcmUuY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsKaHR0cFJlcS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICBzdG9yZS5jb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHJlcy5kYXRhLCB7CiAgICByYW5kb21LZXk6IE1hdGgucmFuZG9tKCkgKiAxMAogIH0pOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgc3RvcmUuY29tbWl0KCdzZXRFcnInLCB0cnVlKTsKICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgIHN0b3JlLmNvbW1pdCgnc2V0RXJyJywgZmFsc2UpOwogIH0sIDMwMDApOwogIHN0b3JlLmNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKCiAgaWYgKGVyci5yZXNwb25zZSkgewogICAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7CiAgICAgIC8vIOWmguaenOi/lOWbnjQwMSDljbPmsqHmnInmnYPpmZDvvIzot7PliLDnmbvlvZXpobXph43mlrDnmbvlvZUKICAgICAgYWxlcnQoJ+ivt+mHjeaWsOeZu+W9lScpOyAvLyByb3V0ZXIucmVwbGFjZSh7CiAgICAgIC8vICAgcGF0aDogJ2xvZ2luJywKICAgICAgLy8gICBxdWVyeToge3JlZGlyZWN0OiByb3V0ZXIuY3VycmVudFJvdXRlLmZ1bGxQYXRofQogICAgICAvLyB9KQogICAgfQogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwpleHBvcnQgZGVmYXVsdCBodHRwUmVxOw=="},{"version":3,"sources":["/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/utils/httpRequest.js"],"names":["axios","store","httpReq","create","defaults","baseURL","process","env","NODE_ENV","timeout","headers","post","forMatData","config","obj","data","str","k","length","slice","interceptors","request","use","Object","assign","headerss","commit","err","alert","Promise","reject","response","res","randomKey","Math","random","setTimeout","status"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport store from '@/store/index.js'\n// import router from '../router'\n\nconst httpReq = axios.create();\nhttpReq.defaults.baseURL = process.env.NODE_ENV === 'development' ? '/api' : \"https://jhhy.vsapp.cn/mobile\";\nhttpReq.defaults.timeout = 5000;\n// httpReq.defaults.headers['Cookie'] = 'openid=oOJiRuHxe1nCyEGQvcl8Gk0ExCs0  '\nhttpReq.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\nhttpReq.defaults.headers.post['X-Requested-With'] = 'XMLHttpRequest'\n\n// 请求拦截\n\nfunction forMatData(config){\n  if (config.headers['Content-Type'] === 'application/x-www-form-urlencoded') {\n    let obj = config.data\n    let str = \"\"\n    for (var k in obj) {\n      str += `${k}=${obj[k]}&`\n    }\n   str= str[str.length-1]==='&'?str.slice(0,str.length-1):str\n    config.data = str\n  }\n}\n\nhttpReq.interceptors.request.use((config) => {\n  config.headers = Object.assign({}, config.headerss, httpReq.defaults.headers.post)\n  forMatData(config)\n  store.commit('setLoading', true);\n  return config\n}, (err) => {\n  alert('网络错误')\n  store.commit('setLoading', false);\n  return Promise.reject(err);\n})\n\nhttpReq.interceptors.response.use((res) => {\n  store.commit('setLoading', false);\n  return { ...res.data,randomKey:Math.random()*10}\n}, err => {\n    store.commit('setErr', true)\n    setTimeout(() => {\n      store.commit('setErr', false)\n    }, 3000);\n  store.commit('setLoading', false);\n  if (err.response) {\n    if (err.response.status == 401) {\n      // 如果返回401 即没有权限，跳到登录页重新登录\n      alert('请重新登录');\n      // router.replace({\n      //   path: 'login',\n      //   query: {redirect: router.currentRoute.fullPath}\n      // })\n    }\n  }\n\n  return Promise.reject(err);\n})\n\nexport default httpReq\n"]}]}