{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/CouponList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/CouponList.vue","mtime":1574411858000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvc2lsYW4vRGVza3RvcC9jb2RlL2NvZGUvcGFydFRpbWUvd2luZS9zdm5hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IENvdXBvbiBmcm9tICIuLi9jb21wb25lbnRzL0NvdXBvbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDb3Vwb246IENvdXBvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBtZW51TGlzdDogW3sKICAgICAgICB0aXRsZTogJ+acquS9v+eUqCcKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5bey5L2/55SoJwogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICflt7Lov4fmnJ8nCiAgICAgIH1dLAogICAgICBhY3RpdmU6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIHN0YXJ0OiAwLAogICAgICBsaW1pdDogMTAsCiAgICAgIHRvdGFsOiAwCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcXVlcnlDb3Vwb25MaXN0OiBmdW5jdGlvbiBxdWVyeUNvdXBvbkxpc3QoKSB7CiAgICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQsCiAgICAgICAgICBsaW1pdCA9IHRoaXMubGltaXQ7CgogICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldENvdXBvbkxpc3RVc2UnLCB7CiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgICAgbGltaXQ6IGxpbWl0CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKCiAgICAgICAgY2FzZSAxOgogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldENvdXBvbkxpc3RVc2VkJywgewogICAgICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgICAgIGxpbWl0OiBsaW1pdAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRDb3Vwb25MaXN0RXhwaXJlZCcsIHsKICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICBsaW1pdDogbGltaXQKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgIHRoaXMucXVlcnlDb3Vwb25MaXN0KCk7CiAgICAgIHRoaXMuc3RhcnQgKz0gdGhpcy5saW1pdDsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgc3dpdGNoVGFiOiBmdW5jdGlvbiBzd2l0Y2hUYWIoKSB7CiAgICAgIHRoaXMucmVzZXRRdWVyeSgpOwogICAgfSwKICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMuc3RhcnQgPSAwOwogICAgICB0aGlzLmxpc3QgPSBbXTsgLy8gdGhpcy5saXN0ID0gW10KICAgICAgLy8gdGhpcy5sb2FkaW5nID1mYWxzZQoKICAgICAgdGhpcy5xdWVyeUNvdXBvbkxpc3QoKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb3Vwb25PYmo6IGZ1bmN0aW9uIGNvdXBvbk9iaigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvdXBvbk9iajsKICAgIH0sCiAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKCkgewogICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgcmV0dXJuICd1c2UnOwoKICAgICAgICBjYXNlIDE6CiAgICAgICAgICByZXR1cm4gJ3VzZWQnOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXR1cm4gJ2V4cGlyZWQnOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICd1c2UnOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY291cG9uT2JqOiBmdW5jdGlvbiBjb3Vwb25PYmooZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coZCk7CiAgICAgIHZhciBsaXN0ID0gZC5saXN0LAogICAgICAgICAgbnVtcyA9IGQubnVtczsKICAgICAgbGlzdCA9IGxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgY29uc29sZS5sb2coaXRlbSk7CiAgICAgICAgaXRlbS5pbWcgPSBfdGhpcy5mb3JtYXRJbWcoaXRlbS5nb29kc19jb3Zlcik7CiAgICAgICAgaXRlbS5nZXRUaW1lID0gX3RoaXMuZm9ybWF0RGF0ZShpdGVtLmN0aW1lKTsKICAgICAgICBpdGVtLmVuZFRpbWUgPSBpc05hTihpdGVtLmV0aW1lICogMTAwMCkgPyBudWxsIDogaXRlbS5ldGltZSAqIDEwMDA7CiAgICAgICAgY29uc29sZS5sb2coaXRlbS5lbmRUaW1lKTsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICAgIHRoaXMubGlzdCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5saXN0KSwgX3RvQ29uc3VtYWJsZUFycmF5KGxpc3QpKTsKICAgICAgdGhpcy50b3RhbCA9IG51bXMgKiAxOwoKICAgICAgaWYgKHRoaXMubGlzdC5sZW5ndGggPj0gdGhpcy50b3RhbCkgewogICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdC5sZW5ndGgsIHRoaXMudG90YWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTsKICAgICAgfQogICAgfSAvLyBhY3RpdmUoYSkgewogICAgLy8gICB0aGlzLnJlc2V0UXVlcnkoKQogICAgLy8gfQoKICB9Cn07"},{"version":3,"sources":["CouponList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"我的代理资格券\" back=\"1\" />\n    <!-- tabs -->\n    <van-tabs v-model=\"active\" sticky @click=\"switchTab\">\n      <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in menuList\" :key=\"item.title\"></van-tab>\n    </van-tabs>\n    <!-- 列表 -->\n    <div class=\"list pad_container\">\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n        <div class=\"list_item\" v-for=\"item in list\" :key=\"item.order_id\">\n          <Coupon :type=\"type\" :endTime=\"item.endTime\" :getTime=\"item.getTime\" :orderNum=\"item.order_num\" :desc=\"item.goods_name\" :img=\"item.img\" />\n        </div>\n      </van-list>\n    </div>\n  </div>\n</template>\n<script>\nimport Coupon from '../components/Coupon'\nexport default {\n  components: {\n    Coupon\n  },\n  data() {\n    return {\n      list: [],\n      menuList: [{ title: '未使用' }, { title: '已使用' }, { title: '已过期' }],\n      active: 0,\n      loading: false,\n      finished: false,\nstart:0,\n      limit: 10,\n      total: 0\n    }\n  },\n  methods: {\n    queryCouponList() {\n      let { start, limit } = this\n      switch (this.active) {\n        case 0:\n          this.$store.dispatch('getCouponListUse', {\n            start,\n            limit\n          })\n          return\n        case 1:\n          this.$store.dispatch('getCouponListUsed', {\n            start,\n            limit\n          })\n          return\n        case 2:\n          this.$store.dispatch('getCouponListExpired', {\n            start,\n            limit\n          })\n          return\n\n        default:\n          return\n      }\n    },\n    onLoad() {\n      this.queryCouponList()\n      this.start += this.limit\n      this.loading = false\n  \n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.queryCouponList()\n    }\n  },\n  computed: {\n    couponObj() {\n      return this.$store.state.couponObj\n    },\n    type(){\n      switch(this.active){\n        case 0:\n          return'use'\n          case 1:\n            return 'used';\n            case 2:\n              return 'expired'\n              default:\n              return 'use'\n      }\n    }\n  },\n  watch: {\n    couponObj(d) {\n      console.log(d)\n      let { list, nums } = d\n      list = list.map(item=>{\n        console.log(item)\n        item.img = this.formatImg(item.goods_cover)\n        item.getTime = this.formatDate(item.ctime)\n        item.endTime =isNaN(item.etime*1000)?null:item.etime*1000\n        console.log(item.endTime)\n        return item\n      })\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n        this.finished = true\n        console.log(this.list.length, this.total)\n      } else {\n        this.finished = false\n      }\n    }\n    // active(a) {\n    //   this.resetQuery()\n\n    // }\n  }\n}\n</script>\n<style scoped>\n.header_con {\n  width: 9.5733rem;\n  height: 4.24rem;\n  background-color: rgba(231, 0, 2, 1);\n  background-image: url('../assets/icons/other/bg_d.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  margin: 0.2rem auto;\n}\n.header_con {\n  font-size: 0.4rem;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n.header_con p,\n.header_con div,\nsmall {\n  color: rgba(255, 255, 255, 0.753);\n}\n.list_item{\n  margin-bottom: .2rem;\n}\n.header_con .num {\n  color: #fff;\n  font-size: 0.96rem;\n}\n.header_con .right {\n  display: flex;\n  width: 2.0133rem;\n  height: 0.7467rem;\n  border: 0.0267rem solid rgba(255, 255, 255, 1);\n  border-radius: 0.3733rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n}\n.van-tab__pane {\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.1333rem;\n  overflow: hidden;\n  width: 9.6rem;\n  margin: 0.2rem auto;\n}\n.right::before {\n  content: '';\n  display: inline-block;\n  width: 0.4rem;\n  height: 0.4rem;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-image: url('../assets/icons/other/exchange.png');\n}\n.van-cell {\n  background: transparent;\n  padding: 0;\n  margin-bottom: 0.3rem;\n}\n</style>"],"sourceRoot":"src/views"}]}