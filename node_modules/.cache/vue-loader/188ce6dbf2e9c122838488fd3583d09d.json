{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/components/SkuModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/components/SkuModal.vue","mtime":1574613400272},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTa3VDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvU2t1Q2FyZCcKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNrdUNhcmQKICB9LAogIHByb3BzOiB7CiAgICBzaG93OiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2t1RGF0YToge30KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWc6ICcnLAogICAgICBtb2RhbDogZmFsc2UsCiAgICAgIGNvdW50OiAxLAogICAgICB0aWNrZXQ6ICcnLAogICAgICBuYW1lOiAnJywKICAgICAgYXR0cl9pZDogJycsCiAgICAgIGFjdGl2ZTogMCwKICAgICAgY3VycmVudEl0ZW06IHt9LAogICAgICB0aWNrZXRQOiAnJywKICAgICAgbGlzdDogW10KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzaG93KHMpIHsKICAgICAgdGhpcy5tb2RhbCA9IHMKICAgIH0sCiAgICBza3VEYXRhKGQpIHsKICAgICAgdGhpcy5saXN0ID0gZC5nb29kc19hdHRyWycxMDIxJ10uY2hpbGRyZW4ubWFwKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBpdGVtLm5hbWUKICAgICAgfSkKICAgICAgY29uc29sZS5sb2codGhpcy5za3VEYXRhLCAn4oCY6Zi/6JCo5b63JykKICAgICAgZC5nb29kc19pbWcgPSBkLmdvb2RzX2ltZy5zcGxpdCgnfHx8JylbMF0KICAgICAgdGhpcy5pbWcgPSB0aGlzLmZvcm1hdEltZyhkLmdvb2RzX2ltZykKICAgICAgdGhpcy50aWNrZXQgPSBkLmRscV9hZGRfbnVtcyB8fCBkLmRscV9uZWVkX251bXMKICAgICAgaWYgKGQuZGxxX2FkZF9udW1zKSB7CiAgICAgICAgdGhpcy50aWNrZXRQID0gJ+i1oOmAgeS7o+eQhui1hOagvOWIuCcKICAgICAgfSBlbHNlIGlmIChkLmRscV9uZWVkX251bXMpIHsKICAgICAgICB0aGlzLnRpY2tldFAgPSAn6ZyA6KaB5Luj55CG6LWE5qC85Yi4JwogICAgICB9CgogICAgICBsZXQgZmlyc3QgPSAgICAgdGhpcy5za3VEYXRhLmdvb2RzX2F0dHJbJzEwMjEnXS5jaGlsZHJlblswXQogICAgIHRoaXMubmFtZSA9IGZpcnN0Lm5hbWUKICAgICAgICAgIHRoaXMuYXR0cl9pZCA9IGZpcnN0LmF0dHJfaWQKICAgICAgICAgIHRoaXMuaW1nID0gdGhpcy5mb3JtYXRJbWcoZmlyc3QuY292ZXIpCiAgCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDbHMoKSB7CiAgICAgIHRoaXMubW9kYWwgPSBmYWxzZQogICAgICB0aGlzLiRlbWl0KCdoYW5kbGVDbHMnLCBmYWxzZSkKICAgIH0sCiAgICBoYW5kbGVDaG9vc2UobmFtZSwgaWR4KSB7CiAgICAgIHRoaXMuc2t1RGF0YS5nb29kc19hdHRyWycxMDIxJ10uY2hpbGRyZW4ubWFwKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pCiAgICAgICAgICAvLyDpgInmi6kKICAgICAgICAgIHRoaXMubmFtZSA9IGl0ZW0ubmFtZQogICAgICAgICAgdGhpcy5hdHRyX2lkID0gaXRlbS5hdHRyX2lkCiAgICAgICAgICB0aGlzLmltZyA9IHRoaXMuZm9ybWF0SW1nKGl0ZW0uY292ZXIpCiAgICAgICAgfQogICAgICB9KQoKICAgICAgdGhpcy5hY3RpdmUgPSBpZHgKICAgIH0sCiAgICBhY3RpdmVDbHMoaWR4KSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gaWR4KSB7CiAgICAgICAgcmV0dXJuICdpdGVtIGFjdGl2ZScKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ2l0ZW0nCiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5bmmK/pm7bllK7ljLrov5jmmK/kvJrlkZjljLrov5jmmK/ku6PnkIbljLoKICAgIGdldFNvdXJjZSgpIHsKICAgICAgbGV0IHsgdHlwZSB9ID0gdGhpcy4kcm91dGUucXVlcnkKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAncmV0YWlsJzoKICAgICAgICAgIHJldHVybiAxCiAgICAgICAgY2FzZSAnYWdlbnQnOgogICAgICAgICAgcmV0dXJuIDMKICAgICAgICBjYXNlICdtZW1iZXInOgogICAgICAgICAgcmV0dXJuIDIKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICcnCiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVPcmRlcigpIHsKICAgICAgbGV0IHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCkKICAgICAgbGV0IHsKICAgICAgICBnb29kc19pZCwKICAgICAgICBwcmljZSwKICAgICAgICBwZXJpb2RfaWQsCiAgICAgICAgZGxxX2FkZF9udW1zLAogICAgICAgIGRscV9uZWVkX251bXMsCiAgICAgICAgZ29vZHNfbmFtZQogICAgICB9ID0gdGhpcy5za3VEYXRhCiAgICAgIC8v6K6i5Y2V5Y+3CiAgICAgIGxldCBhdHRyX2lkID0gdGhpcy5hdHRyX2lkCiAgICAgIGxldCBidXlfbnVtID0gdGhpcy5jb3VudAogICAgICBsZXQgbmFtZSA9IHRoaXMubmFtZQogICAgICBsZXQgaW1nID0gdGhpcy5pbWcKICAgICAgbGV0IG9yZGVyX251bSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgIC8v5bim5Y+C5pWw5Yiw6K6i5Y2VCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnb3JkZXInLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBzb3VyY2UsCiAgICAgICAgICBnb29kc19pZCwKICAgICAgICAgIHByaWNlLAogICAgICAgICAgcGVyaW9kX2lkLAogICAgICAgICAgYXR0cl9pZCwKICAgICAgICAgIG5hbWUsCiAgICAgICAgICBkbHFfYWRkX251bXMsCiAgICAgICAgICBkbHFfbmVlZF9udW1zLAogICAgICAgICAgaW1nLAogICAgICAgICAgZ29vZHNfbmFtZSwKICAgICAgICAgIGJ1eV9udW0sCiAgICAgICAgICBvcmRlcl9udW0KICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfSwKICBtb3VudGVkKCkge30KfQo="},{"version":3,"sources":["SkuModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SkuModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <van-popup v-model=\"modal\" position=\"bottom\" @closed=\"handleCls\">\n      <SkuCard\n        :img=\"img\"\n        :num=\"ticket\"\n        :price=\"skuData.price\"\n        :title=\"skuData.goods_name\"\n        :tickP=\"ticketP\"\n      />\n\n      <div class=\"pad_container\">\n        <!-- 度数 -->\n        <p>度数</p>\n        <div class=\"desc\">\n          <div\n            :class=\"activeCls(idx)\"\n            v-for=\"(item,idx) in list\"\n            :key=\"item\"\n            @click=\"handleChoose(item,idx)\"\n          >{{item}}</div>\n        </div>\n        <!-- 选择数量 -->\n        <div class=\"count flex_bet\">\n          <p>购买数量</p>\n          <van-stepper v-model=\"count\" button-size=\".6rem\" />\n        </div>\n        <!-- 抢购俺妞妞 -->\n        <div class=\"buy\" @click=\"createOrder\">立即抢购</div>\n      </div>\n    </van-popup>\n  </div>\n</template>\n<script>\nimport SkuCard from '../components/SkuCard'\nexport default {\n  components: {\n    SkuCard\n  },\n  props: {\n    show: {\n      default: false\n    },\n    skuData: {}\n  },\n  data() {\n    return {\n      img: '',\n      modal: false,\n      count: 1,\n      ticket: '',\n      name: '',\n      attr_id: '',\n      active: 0,\n      currentItem: {},\n      ticketP: '',\n      list: []\n    }\n  },\n  watch: {\n    show(s) {\n      this.modal = s\n    },\n    skuData(d) {\n      this.list = d.goods_attr['1021'].children.map(item => {\n        return item.name\n      })\n      console.log(this.skuData, '‘阿萨德')\n      d.goods_img = d.goods_img.split('|||')[0]\n      this.img = this.formatImg(d.goods_img)\n      this.ticket = d.dlq_add_nums || d.dlq_need_nums\n      if (d.dlq_add_nums) {\n        this.ticketP = '赠送代理资格券'\n      } else if (d.dlq_need_nums) {\n        this.ticketP = '需要代理资格券'\n      }\n\n      let first =     this.skuData.goods_attr['1021'].children[0]\n     this.name = first.name\n          this.attr_id = first.attr_id\n          this.img = this.formatImg(first.cover)\n  \n    }\n  },\n  methods: {\n    handleCls() {\n      this.modal = false\n      this.$emit('handleCls', false)\n    },\n    handleChoose(name, idx) {\n      this.skuData.goods_attr['1021'].children.map(item => {\n        if (item.name === name) {\n          console.log(item)\n          // 选择\n          this.name = item.name\n          this.attr_id = item.attr_id\n          this.img = this.formatImg(item.cover)\n        }\n      })\n\n      this.active = idx\n    },\n    activeCls(idx) {\n      if (this.active === idx) {\n        return 'item active'\n      } else {\n        return 'item'\n      }\n    },\n    // 获取是零售区还是会员区还是代理区\n    getSource() {\n      let { type } = this.$route.query\n      switch (type) {\n        case 'retail':\n          return 1\n        case 'agent':\n          return 3\n        case 'member':\n          return 2\n        default:\n          return ''\n      }\n    },\n    createOrder() {\n      let source = this.getSource()\n      let {\n        goods_id,\n        price,\n        period_id,\n        dlq_add_nums,\n        dlq_need_nums,\n        goods_name\n      } = this.skuData\n      //订单号\n      let attr_id = this.attr_id\n      let buy_num = this.count\n      let name = this.name\n      let img = this.img\n      let order_num = new Date().getTime()\n      //带参数到订单\n      this.$router.push({\n        name: 'order',\n        query: {\n          source,\n          goods_id,\n          price,\n          period_id,\n          attr_id,\n          name,\n          dlq_add_nums,\n          dlq_need_nums,\n          img,\n          goods_name,\n          buy_num,\n          order_num\n        }\n      })\n    }\n  },\n  mounted() {}\n}\n</script>\n<style scoped>\np {\n  font-size: 0.3733rem;\n}\n.buy {\n  left: 0;\n  right: 0;\n  bottom: 1rem;\n  margin: auto;\n  width: 5.0133rem;\n  height: 1.3867rem;\n  color: #fff;\n  background-image: url('../assets/icons/home/buy.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-color: transparent;\n  border: none;\n  box-sizing: border-box;\n  padding-right: 0.4rem;\n  font-size: 0.36rem;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.5rem;\n  margin: 1rem auto;\n}\n.item {\n  display: inline-block;\n  margin: 0.1rem;\n  border: 0.0267rem solid rgba(193, 193, 193, 1);\n  font-size: 0.36rem;\n  border-radius: 0.2rem;\n  padding: 0.2rem 0.4rem;\n}\n.active {\n  border: 0.0267rem solid #ff0000;\n}\n</style>"]}]}