{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/GoodsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/GoodsList.vue","mtime":1574147195000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTaG9wQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL1Nob3BDYXJkLnZ1ZScKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNob3BDYXJkCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhcnQ6IDAsCiAgICAgIHRpbWU6IDAsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIHR5cGU6ICcnLAogICAgICBsaXN0TGVuOiAnJywKICAgICAgZ29vZHNMaXN0OiBbXQogICAgICAvLyBnb29kc0xpc3Q6IFsKICAgICAgLy8gICB7CiAgICAgIC8vICAgICBpZDogMCwKICAgICAgLy8gICAgIHRpdGxlOiAn6IyF5Y+w6L+O5a6+NTPluqbojIXlj7Dov47lrr7phZI1MDBtbCDnpLznm5Loo4XphZLljoLnm7TkvpsnLAogICAgICAvLyAgICAgaW1nOgogICAgICAvLyAgICAgICAnaHR0cHM6Ly9zczAuYmRzdGF0aWMuY29tLzcwY0Z2SFNoX1ExWW54R2twb1dLMUhGNmhoeS9pdC91PTM3MzA3NDMwMjQsMzcyNDc5NzYzNCZmbT0yNiZncD0wLmpwZycsCiAgICAgIC8vICAgICB0YWc6ICfpnIAnLAogICAgICAvLyAgICAgdGFnRnVsbENvbG9yOiB0cnVlLAogICAgICAvLyAgICAgdGFnUDogJzPlvKDku6PnkIbmnYMnLAogICAgICAvLyAgICAgcHJpY2U6ICcyJywKICAgICAgLy8gICAgIG9yaWdpblByaWNlOiAxMjMsCiAgICAgIC8vICAgICBiZ0ltZzogcmVxdWlyZSgnJGEvaWNvbnMvaG9tZS9nX2J1eS5wbmcnKSwKICAgICAgLy8gICAgIGJ0bk5hbWU6ICfljrvmiqLotK0nCiAgICAgIC8vICAgfSwKICAgICAgLy8gICB7CiAgICAgIC8vICAgICBpZDogMSwKCiAgICAgIC8vICAgICB0aXRsZTogJ+iMheWPsOi/juWuvjUz5bqm6IyF5Y+w6L+O5a6+6YWSNTAwbWwg56S855uS6KOF6YWS5Y6C55u05L6bJywKICAgICAgLy8gICAgIGltZzoKICAgICAgLy8gICAgICAgJ2h0dHBzOi8vc3MwLmJkc3RhdGljLmNvbS83MGNGdkhTaF9RMVlueEdrcG9XSzFIRjZoaHkvaXQvdT0zNzMwNzQzMDI0LDM3MjQ3OTc2MzQmZm09MjYmZ3A9MC5qcGcnLAogICAgICAvLyAgICAgdGFnOiAn6YCBJywKICAgICAgLy8gICAgIHRhZ1A6ICcz5byg5Luj55CG5p2DJywKICAgICAgLy8gICAgIHByaWNlOiAnMicsCiAgICAgIC8vICAgICBiZ0ltZzogcmVxdWlyZSgnJGEvaWNvbnMvaG9tZS9idXkucG5nJyksCiAgICAgIC8vICAgICBidG5OYW1lOiAn5Y675oqi6LStJwogICAgICAvLyAgIH0KICAgICAgLy8gXQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2hvb3NlKGlkKSB7CiAgICAgIGxldCB7dHlwZSxsc3FfcGVyaW9kX2lkLGRscV9wZXJpb2RfaWR9ID0gdGhpcy4kcm91dGUucXVlcnkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6Jy9nb29kc0RldGFpbCcsCiAgICAgICAgcXVlcnk6ewogICAgICAgICAgdHlwZSwKICAgICAgICAgIGdvb2RzX2lkOmlkLAogICAgICAgICAgcGVyaW9kX2lkOmxzcV9wZXJpb2RfaWR8fGRscV9wZXJpb2RfaWQKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIG9uTG9hZCgpIHsKICAgICAgdGhpcy5xdWVyeUluZm8oKQogICAgICB0aGlzLnN0YXJ0ICs9IDEwCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlSnVtcFRvKGl0ZW0pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6IGl0ZW0ubGluawogICAgICB9KQogICAgfSwKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy4kdG9hc3QoJ+WIt+aWsOaIkOWKnycpCiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICB9LCA1MDApCiAgICB9LAogICAgcXVlcnlJbmZvKCkgewogICAgICBjb25zdCBvYmogPSB7CiAgICAgICAgcmV0YWlsOiAoKSA9PiB7CiAgICAgICAgICBsZXQgeyBsc3FfcGVyaW9kX2lkIH0gPSB0aGlzLiRyb3V0ZS5xdWVyeQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldFJldGFpbExpc3QnLCB7CiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LAogICAgICAgICAgICBsaW1pdDogJzEwJywKICAgICAgICAgICAgcGVyaW9kX2lkOiBsc3FfcGVyaW9kX2lkCiAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYWdlbnQ6ICgpID0+IHsKICAgICAgICAgIGxldCB7IGRscV9wZXJpb2RfaWQgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0QWdlbnRMaXN0JywgewogICAgICAgICAgICBzdGFydDogdGhpcy5zdGFydCwKICAgICAgICAgICAgbGltaXQ6ICcxMCcsCiAgICAgICAgICAgIHBlcmlvZF9pZDogZGxxX3BlcmlvZF9pZAogICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNwZWNpYWw6KCk9PnsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRTcGVjaWFsTGlzdCcsIHsKICAgICAgICAgICAgc3RhcnQ6IHRoaXMuc3RhcnQsCiAgICAgICAgICAgIGxpbWl0OiAnMTAnLAogICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgICAgICAgICBtZW1iZXI6KCk9PnsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRNZW1iZXJHb29kc0xpc3QnLCB7CiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LAogICAgICAgICAgICBsaW1pdDogJzEwJywKICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgfQogICAgICBvYmpbdGhpcy50eXBlXSgpCiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhlYWRlclRpdGxlKCl7CiAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgICBjYXNlICdhZ2VudCc6CiAgICAgICAgICByZXR1cm4gJ+S7o+eQhuWMuuWIl+ihqCcKICAgICAgICBjYXNlICdyZXRhaWwnOgogICAgICAgICAgcmV0dXJuICfpm7bllK7ljLrliJfooagnCiAgICAgICAgICBjYXNlICdtZW1iZXInOgogICAgICAgICAgICByZXR1cm4gJ+S8muWRmOWMuuWIl+ihqCcKICAgICAgICAgICAgY2FzZSAnc3BlY2lhbCc6CiAgICAgICAgICAgICAgcmV0dXJuICfkuKrmgKflrprliLbljLrliJfooagnCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAn5YiX6KGoJwogICAgICB9CiAgICB9LAogICAgLy8g55uR5ZCs5a+56LGhCiAgICB0YWcoKSB7CiAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgICAgY2FzZSAnYWdlbnQnOgogICAgICAgICAgcmV0dXJuICfpnIAnCiAgICAgICAgY2FzZSAncmV0YWlsJzoKICAgICAgICAgIHJldHVybiAn6YCBJwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gJ+mAgScKICAgICAgfQogICAgfSwKICAgIGRhdGFPYmooKSB7CiAgICAgIGxldCB0eXBlID0gdGhpcy50eXBlCiAgICAgIHZhciBzdG9yZSA9IHsKICAgICAgICByZXRhaWw6IHRoaXMuJHN0b3JlLnN0YXRlLnJldGFpbEdvb2RzTGlzdCwKICAgICAgICBhZ2VudDogdGhpcy4kc3RvcmUuc3RhdGUuYWdlbnRHb29kc0xpc3QsCiAgICAgICAgc3BlY2lhbDp0aGlzLiRzdG9yZS5zdGF0ZS5zcGVjaWFsR29vZHNMaXN0LAogICAgICAgIG1lbWJlcjp0aGlzLiRzdG9yZS5zdGF0ZS5tZW1iZXJHb29kc0xpc3QKICAgICAgfQogICAgICBsZXQgb2JqID0ge30KICAgICAgaWYgKHN0b3JlW3R5cGVdKSB7CiAgICAgICAgb2JqID0gc3RvcmVbdHlwZV0KCiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoKSB7CiAgICAgICAgICBsZXQgbGlzdCA9IG9iai5saXN0Lm1hcChpdGVtID0+IHsKICAgICAgICAgICAgaXRlbS5pbWcgPSB0aGlzLmZvcm1hdEltZyhpdGVtLmNvdmVyKQogICAgICAgICAgICBpdGVtLmJnSW1nID0gcmVxdWlyZSgnJGEvaWNvbnMvaG9tZS9idXkucG5nJykKICAgICAgICAgICAgaXRlbS5idG5OYW1lID0gJ+WOu+aKoui0rScKICAgICAgICAgICAgaXRlbS50YWdQID0gYCR7aXRlbS5kbHFfYWRkX251bXMgfHwgaXRlbS5kbHFfbmVlZF9udW1zfeW8oOS7o+eQhuadg2AKICAgICAgICAgICAgaXRlbS50aXRsZSA9IGl0ZW0uZ29vZHNfbmFtZQogICAgICAgICAgICBpdGVtLnByaWNlID0gaXRlbS5wcmljZSoxLzEwMAogICAgICAgICAgICByZXR1cm4gaXRlbQogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybiB7IGxpc3QsIGxlbjogb2JqLm51bXMgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGwKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvL+WvueaVsOe7hOebkeWQrAogICAgZGF0YU9iaihlKSB7CiAgICAgIGlmICghZSkgcmV0dXJuCiAgICAgIGxldCB7IGxpc3QsIGxlbiB9ID0gZQogICAgICB0aGlzLmdvb2RzTGlzdCA9IFsuLi50aGlzLmdvb2RzTGlzdCwgLi4ubGlzdF0KICAgICAgdGhpcy5saXN0TGVuID0gbGVuICogMQovLyDlgZzmraLliqDovb0KICAgICAgaWYgKHRoaXMuZ29vZHNMaXN0Lmxlbmd0aCA+PSB0aGlzLmxpc3RMZW4pIHsKICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IHsgdHlwZSwgdGltZSB9ID0gdGhpcy4kcm91dGUucXVlcnkKICAgIHRoaXMudGltZSA9IHRpbWUgKiAxCiAgICB0aGlzLnR5cGUgPSB0eXBlCiAgICB0aGlzLm9uTG9hZCgpCiAgfQp9Cg=="},{"version":3,"sources":["GoodsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GoodsList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader :title=\"headerTitle\" back=\"1\" />\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\n      <div class=\"pad_container\">\n        <div class=\"flex dateCount\" v-if=\"time\">\n          <p>距离结束还有</p>\n          <van-count-down class=\"time\" :time=\"time\">\n            <template v-slot=\"timeData\">\n              <span class=\"item\">{{ timeData.hours }}</span>:\n              <span class=\"item\">{{ timeData.minutes }}</span>:\n              <span class=\"item\">{{ timeData.seconds }}</span>\n            </template>\n          </van-count-down>\n        </div>\n\n        <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"- 已经到底啦 -\" @load=\"onLoad\">\n          <van-cell v-for=\"(item) in goodsList\" :key=\"item.id\" style=\"padding:0;\">\n            <ShopCard\n              :key=\"item.id\"\n              :title=\"item.title\"\n              :img=\"item.img\"\n              :price=\"item.price\"\n              :bgImg=\"item.bgImg\"\n              :btnName=\"item.btnName\"\n              :tag=\"tag\"\n              :tagP=\"item.tagP\"\n              @choose=\"handleChoose(item.id)\"\n              @buy=\"handleChoose(item.id)\"\n            />\n          </van-cell>\n        </van-list>\n      </div>\n    </van-pull-refresh>\n  </div>\n</template>\n<script>\nimport ShopCard from '../components/ShopCard.vue'\nexport default {\n  components: {\n    ShopCard\n  },\n  data() {\n    return {\n      start: 0,\n      time: 0,\n      isLoading: false,\n      loading: false,\n      finished: false,\n      type: '',\n      listLen: '',\n      goodsList: []\n      // goodsList: [\n      //   {\n      //     id: 0,\n      //     title: '茅台迎宾53度茅台迎宾酒500ml 礼盒装酒厂直供',\n      //     img:\n      //       'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3730743024,3724797634&fm=26&gp=0.jpg',\n      //     tag: '需',\n      //     tagFullColor: true,\n      //     tagP: '3张代理权',\n      //     price: '2',\n      //     originPrice: 123,\n      //     bgImg: require('$a/icons/home/g_buy.png'),\n      //     btnName: '去抢购'\n      //   },\n      //   {\n      //     id: 1,\n\n      //     title: '茅台迎宾53度茅台迎宾酒500ml 礼盒装酒厂直供',\n      //     img:\n      //       'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3730743024,3724797634&fm=26&gp=0.jpg',\n      //     tag: '送',\n      //     tagP: '3张代理权',\n      //     price: '2',\n      //     bgImg: require('$a/icons/home/buy.png'),\n      //     btnName: '去抢购'\n      //   }\n      // ]\n    }\n  },\n  methods: {\n    handleChoose(id) {\n      let {type,lsq_period_id,dlq_period_id} = this.$route.query\n      this.$router.push({\n        path:'/goodsDetail',\n        query:{\n          type,\n          goods_id:id,\n          period_id:lsq_period_id||dlq_period_id\n        }\n      })\n    },\n\n    onLoad() {\n      this.queryInfo()\n      this.start += 10\n      this.loading = false\n    },\n    handleJumpTo(item) {\n      this.$router.push({\n        path: item.link\n      })\n    },\n    onRefresh() {\n      setTimeout(() => {\n        this.$toast('刷新成功')\n        this.isLoading = false\n      }, 500)\n    },\n    queryInfo() {\n      const obj = {\n        retail: () => {\n          let { lsq_period_id } = this.$route.query\n          this.$store.dispatch('getRetailList', {\n            start: this.start,\n            limit: '10',\n            period_id: lsq_period_id\n          })\n        },\n        agent: () => {\n          let { dlq_period_id } = this.$route.query\n          this.$store.dispatch('getAgentList', {\n            start: this.start,\n            limit: '10',\n            period_id: dlq_period_id\n          })\n        },\n        special:()=>{\n          this.$store.dispatch('getSpecialList', {\n            start: this.start,\n            limit: '10',\n          })\n        },\n               member:()=>{\n          this.$store.dispatch('getMemberGoodsList', {\n            start: this.start,\n            limit: '10',\n          })\n        },\n      }\n      obj[this.type]()\n    },\n  },\n  computed: {\n    headerTitle(){\n  switch (this.type) {\n        case 'agent':\n          return '代理区列表'\n        case 'retail':\n          return '零售区列表'\n          case 'member':\n            return '会员区列表'\n            case 'special':\n              return '个性定制区列表'\n        default:\n          return '列表'\n      }\n    },\n    // 监听对象\n    tag() {\n      switch (this.type) {\n        case 'agent':\n          return '需'\n        case 'retail':\n          return '送'\n        default:\n          return '送'\n      }\n    },\n    dataObj() {\n      let type = this.type\n      var store = {\n        retail: this.$store.state.retailGoodsList,\n        agent: this.$store.state.agentGoodsList,\n        special:this.$store.state.specialGoodsList,\n        member:this.$store.state.memberGoodsList\n      }\n      let obj = {}\n      if (store[type]) {\n        obj = store[type]\n\n        if (Object.keys(obj).length) {\n          let list = obj.list.map(item => {\n            item.img = this.formatImg(item.cover)\n            item.bgImg = require('$a/icons/home/buy.png')\n            item.btnName = '去抢购'\n            item.tagP = `${item.dlq_add_nums || item.dlq_need_nums}张代理权`\n            item.title = item.goods_name\n            item.price = item.price*1/100\n            return item\n          })\n          return { list, len: obj.nums }\n        }\n      }\n\n      return null\n    }\n  },\n  watch: {\n    //对数组监听\n    dataObj(e) {\n      if (!e) return\n      let { list, len } = e\n      this.goodsList = [...this.goodsList, ...list]\n      this.listLen = len * 1\n// 停止加载\n      if (this.goodsList.length >= this.listLen) {\n        this.finished = true\n      }\n    }\n  },\n  mounted() {\n    let { type, time } = this.$route.query\n    this.time = time * 1\n    this.type = type\n    this.onLoad()\n  }\n}\n</script>\n<style scoped>\n.time {\n  margin-left: 0.2rem;\n}\n.item {\n  display: inline-block;\n  width: 0.5rem;\n  margin-right: 5px;\n  color: #fff;\n  font-size: 0.16rem;\n  text-align: center;\n  background-color: #e70002;\n}\n.dateCount {\n  font-size: 0.4rem;\n  justify-content: center;\n  margin: 0.2rem 0;\n}\n.van-cell {\n  background: transparent;\n  padding: 0;\n}\n.relative {\n  margin: 0.1rem 0;\n}\n</style>"]}]}