{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/MySaleList.vue?vue&type=style&index=0&id=15bcdeea&scoped=true&lang=css&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/MySaleList.vue","mtime":1574607790152},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaGVhZGVyX2NvbiB7CiAgd2lkdGg6IDkuNTczM3JlbTsKICBoZWlnaHQ6IDQuMjRyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMzEsIDAsIDIsIDEpOwogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vYXNzZXRzL2ljb25zL290aGVyL2JnX2QucG5nJyk7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogYm90dG9tOwogIGJveC1zaGFkb3c6IDBweCAycHggNnB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogIGJvcmRlci1yYWRpdXM6IDAuMnJlbTsKICBtYXJnaW46IDAuMnJlbSBhdXRvOwp9Ci5oZWFkZXJfY29uIHsKICBmb250LXNpemU6IDAuNHJlbTsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLmhlYWRlcl9jb24gcCwKLmhlYWRlcl9jb24gZGl2LApzbWFsbCB7CiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43NTMpOwp9Ci5saXN0X2l0ZW0gewogIG1hcmdpbi1ib3R0b206IDAuMnJlbTsKfQouaGVhZGVyX2NvbiAubnVtIHsKICBjb2xvcjogI2ZmZjsKICBmb250LXNpemU6IDAuOTZyZW07Cn0KLmhlYWRlcl9jb24gLnJpZ2h0IHsKICBkaXNwbGF5OiBmbGV4OwogIHdpZHRoOiAyLjAxMzNyZW07CiAgaGVpZ2h0OiAwLjc0NjdyZW07CiAgYm9yZGVyOiAwLjAyNjdyZW0gc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAxKTsKICBib3JkZXItcmFkaXVzOiAwLjM3MzNyZW07CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLnZhbi10YWJfX3BhbmUgewogIGJveC1zaGFkb3c6IDBweCAycHggNnB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogIGJvcmRlci1yYWRpdXM6IDAuMTMzM3JlbTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHdpZHRoOiA5LjZyZW07CiAgbWFyZ2luOiAwLjJyZW0gYXV0bzsKfQoucmlnaHQ6OmJlZm9yZSB7CiAgY29udGVudDogJyc7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHdpZHRoOiAwLjRyZW07CiAgaGVpZ2h0OiAwLjRyZW07CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vYXNzZXRzL2ljb25zL290aGVyL2V4Y2hhbmdlLnBuZycpOwp9Ci52YW4tY2VsbCB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgcGFkZGluZzogMDsKICBtYXJnaW4tYm90dG9tOiAwLjNyZW07Cn0K"},{"version":3,"sources":["MySaleList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MySaleList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"寄售商品\" back=\"1\" />\n    <!-- tabs -->\n    <van-tabs v-model=\"active\" sticky @click=\"switchTab\">\n      <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in menuList\" :key=\"item.title\"></van-tab>\n    </van-tabs>\n    <!-- 列表 -->\n    <div class=\"list pad_container\">\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n        <div class=\"list_item\" v-for=\"item in list\" :key=\"item.order_id\">\n          <SaleCard\n            :type=\"type\"\n            :sale_nums=\"item.sale_nums\"\n            :remain_nums=\"item.remain_nums\"\n            :desc=\"item.goods_attr\"\n            :title=\"item.goods_name\"\n            :order_id =\"item.order_id\"\n            :img=\"formatImg(item.goods_cover)\"\n            :price=\"item.goods_price\"\n            :nums=\"item.goods_nums\"\n            :id=\"item.order_id\"\n            :total=\"item.total_amount\"\n            @handleSale=\"handleSale\"\n            @handleCancelSale=\"handleCancelSale\"\n            @routerLink=\"routerLink\"\n          />\n        </div>\n      </van-list>\n    </div>\n  </div>\n</template>\n<script>\nimport SaleCard from '../components/SaleCard'\nexport default {\n  components: {\n    SaleCard\n  },\n  data() {\n    return {\n      list: [],\n      menuList: [{ title: '可寄售' }, { title: '寄售中' }, { title: '已售完' }],\n      active: 0,\n      loading: false,\n      finished: false,\n      start: 0,\n      limit: 10,\n      total: 0\n    }\n  },\n  methods: {\n    querySaleList() {\n      let { start, limit } = this\n      switch (this.active) {\n        case 0:\n          this.$store.dispatch('mySaleList', {\n            start,\n            limit\n          })\n          return\n        case 1:\n          this.$store.dispatch('mySalingList', {\n            start,\n            limit\n          })\n          return\n        case 2:\n          this.$store.dispatch('mySaledList', {\n            start,\n            limit\n          })\n          return\n\n        default:\n          return\n      }\n    },\n    // 寄售操作\n    handleSale(order_id) {\n      this.$store.dispatch('handleSale', {\n        order_id\n      })\n    },\n    // 取消寄售\n    handleCancelSale(order_id) {\n      this.$store.dispatch('handleCancelSale', {\n        order_id\n      })\n    },\n    onLoad() {\n      this.querySaleList()\n      this.start += this.limit\n      this.loading = false\n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.querySaleList()\n    },\n    routerLink(order_id){\nthis.$router.push({\n  path:\"/saleOrder\",\n  query:{\n    order_id\n  }\n})\n    },\n  },\n  computed: {\n    mySaleList() {\n      return this.$store.state.mySaleList\n    },\n    type() {\n      switch (this.active) {\n        case 0:\n          return 'sale'\n        case 1:\n          return 'saling'\n\n        default:\n          return ''\n      }\n    },\n    salingData() {\n      return this.$store.state.salingData\n    }\n  },\n  watch: {\n    salingData:{\n      handler(d){\n      console.log(d)\n      if (d.data ) {\n        this.resetQuery()\n      }\n      },\n      deep:true,\n    },\n    mySaleList(d) {\n      console.log(d)\n      let { list, nums } = d\n      list = list.map(item => {\n        console.log(item)\n        item.img = this.formatImg(item.goods_cover)\n        item.getTime = this.formatDate(item.ctime)\n        item.endTime = isNaN(item.etime * 1000) ? null : item.etime * 1000\n        console.log(item.endTime)\n        return item\n      })\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n        this.finished = true\n        console.log(this.list.length, this.total)\n      } else {\n        this.finished = false\n      }\n    }\n    // active(a) {\n    //   this.resetQuery()\n\n    // }\n  }\n}\n</script>\n<style scoped>\n.header_con {\n  width: 9.5733rem;\n  height: 4.24rem;\n  background-color: rgba(231, 0, 2, 1);\n  background-image: url('../assets/icons/other/bg_d.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  margin: 0.2rem auto;\n}\n.header_con {\n  font-size: 0.4rem;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n.header_con p,\n.header_con div,\nsmall {\n  color: rgba(255, 255, 255, 0.753);\n}\n.list_item {\n  margin-bottom: 0.2rem;\n}\n.header_con .num {\n  color: #fff;\n  font-size: 0.96rem;\n}\n.header_con .right {\n  display: flex;\n  width: 2.0133rem;\n  height: 0.7467rem;\n  border: 0.0267rem solid rgba(255, 255, 255, 1);\n  border-radius: 0.3733rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n}\n.van-tab__pane {\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.1333rem;\n  overflow: hidden;\n  width: 9.6rem;\n  margin: 0.2rem auto;\n}\n.right::before {\n  content: '';\n  display: inline-block;\n  width: 0.4rem;\n  height: 0.4rem;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-image: url('../assets/icons/other/exchange.png');\n}\n.van-cell {\n  background: transparent;\n  padding: 0;\n  margin-bottom: 0.3rem;\n}\n</style>"]}]}