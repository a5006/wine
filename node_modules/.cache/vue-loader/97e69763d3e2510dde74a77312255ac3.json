{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/EditBank.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/EditBank.vue","mtime":1574217430000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdE1vZGFsOiBmYWxzZSwKICAgICAgYmFua19udW1iZXI6ICcnLAogICAgICBiYW5rX25hbWU6ICcnLAogICAgICB1c2VyX25hbWU6ICcnLAogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICB0eXBlOiAnJywKICAgICAgbW9kYWxWYWw6ICcnCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDnvJbovpHpk7booYzljaEKICAgIGVkaXRCYW5rKCkgewogICAgICBsZXQgeyBpZCB9ID0gdGhpcy4kcm91dGUucXVlcnkKICAgICAgbGV0IHsgYmFua19udW1iZXIsIGJhbmtfbmFtZSwgdXNlcl9uYW1lIH0gPSB0aGlzCgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZWRpdEJhbmsnLCB7CiAgICAgICAgaWQsCiAgICAgICAgYmFua19udW1iZXIsCiAgICAgICAgYmFua19uYW1lLAogICAgICAgIHVzZXJfbmFtZQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUJ0bigpIHsKICAgICAgLy8g5aaC5p6c5Li657yW6L6R54q25oCB5LiLCiAgICAgIGxldCB7IGlkIH0gPSB0aGlzLiRyb3V0ZS5xdWVyeQogICAgICBpZCA9IGlkICogMQogICAgICBpZiAodGhpcy5pc0VkaXQpIHsKICAgICAgICBjb25zb2xlLmxvZygn5L+d5a2YJykKICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5jaGVja0lucHV0KCkKICAgICAgICBpZiAoIXJlc3VsdCkgewogICAgICAgICAgdGhpcy4kdG9hc3QoJ+ivt+Whq+WGmeWujOaVtOWGheWuuScpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgaWYgKGlkID4gMCkgewogICAgICAgICAgdGhpcy5lZGl0QmFuaygpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWRkQmFuaygpCiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuaXNFZGl0ID0gIXRoaXMuaXNFZGl0CiAgICB9LAogICAgLy8g5paw5aKe6Iux6Iiq5Y2hCiAgICBhZGRCYW5rKCkgewogICAgICBsZXQgeyBiYW5rX251bWJlciwgYmFua19uYW1lLCB1c2VyX25hbWUgfSA9IHRoaXMKCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZGRCYW5rJywgewogICAgICAgIGJhbmtfbnVtYmVyLAogICAgICAgIGJhbmtfbmFtZSwKICAgICAgICB1c2VyX25hbWUKICAgICAgfSkKICAgIH0sCiAgICAvLyDojrflj5bpk7booYzljaHkv6Hmga8KCiAgICBnZXRCYW5rSW5mbygpIHsKICAgICAgbGV0IHsgaWQgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRCYW5rSW5mbycsIHsKICAgICAgICBpZAogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVNob3dNb2RhbChlKSB7CiAgICAgIGlmICghdGhpcy5pc0VkaXQpIHJldHVybgogICAgICB0aGlzLmVkaXRNb2RhbCA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVDb25maXJtVXNlckluZm8oZCkge30sCiAgICBvbkNoYW5nZShwaWNrZXIsIHZhbHVlLCBpbmRleCkgewogICAgICB0aGlzLm1vZGFsVmFsID0gdmFsdWUKICAgIH0sCiAgICBiZWZvcmVDbG9zZShhLCBkKSB7CiAgICAgIGlmIChhID09PSAnY2FuY2VsJykgewogICAgICAgIGQoKQogICAgICB9IGVsc2UgaWYgKGEgPT09ICdjb25maXJtJykgewogICAgICAgIHRoaXMuYmFua19uYW1lID0gdGhpcy5tb2RhbFZhbCB8fCB0aGlzLmFsbEJhbmtMaXN0TmFtZVswXQogICAgICAgIGQoKQogICAgICB9CiAgICB9LAogICAgZ2V0QWxsQmFua0xpc3QoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRCYW5rQWxsTGlzdCcpCiAgICB9LAogICAgcXVlcnlCYW5rSW5mbygpIHsKICAgICAgbGV0IHsgaWQgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICAgIGlkID0gaWQgKiAxCiAgICAgIGlmIChpZCA+PSAwKSB7CiAgICAgICAgdGhpcy5nZXRCYW5rSW5mbygpCiAgICAgIH0KICAgIH0sCiAgICBjaGVja0lucHV0KCkgewogICAgICBsZXQgeyBiYW5rX251bWJlciwgYmFua19uYW1lLCB1c2VyX25hbWUgfSA9IHRoaXMKICAgICAgbGV0IG9iaiA9IHsKICAgICAgICBiYW5rX251bWJlciwKICAgICAgICBiYW5rX25hbWUsCiAgICAgICAgdXNlcl9uYW1lCiAgICAgIH0KCiAgICAgIGZvciAobGV0IGsgaW4gb2JqKSB7CiAgICAgICAgaWYgKCFvYmpba10pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGspCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGFsbEJhbmtMaXN0KGwpIHt9LAogICAgYmFua0NhcmQoZCkgewogICBsZXQgeyBiYW5rX251bWJlciwgYmFua19uYW1lLCB1c2VyX25hbWUgfSA9IGQKICAgdGhpcy5iYW5rX25hbWUgPSBiYW5rX25hbWUKICAgdGhpcy5iYW5rX251bWJlciA9IGJhbmtfbnVtYmVyCiAgIHRoaXMudXNlcl9uYW1lID0gdXNlcl9uYW1lCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgCiAgICBiYW5rQ2FyZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmJhbmtDYXJkCiAgICB9LAogICAgYWxsQmFua0xpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hbGxCYW5rTGlzdAogICAgfSwKICAgIGFsbEJhbmtMaXN0TmFtZSgpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLmFsbEJhbmtMaXN0Lmxlbmd0aCAmJiB0aGlzLmFsbEJhbmtMaXN0Lm1hcChpdGVtID0+IGl0ZW0uYmFua19uYW1lKQogICAgICApCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgLy8g6I635Y+W6ZO26KGM5Y2h55qE5YiX6KGoCiAgICB0aGlzLmdldEFsbEJhbmtMaXN0KCkKICAgIC8vIOiOt+WPluWNleS4qumTtuihjOWNoeS/oeaBrwogICAgdGhpcy5xdWVyeUJhbmtJbmZvKCkKICB9Cn0K"},{"version":3,"sources":["EditBank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditBank.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"list\">\n    <Gheader title=\"添加银行卡\" back=\"1\" />\n    <div class=\"list_content\">\n      <div class=\"item flex_bet\">\n        <p class=\"title\">银行卡号</p>\n        <van-field\n          v-model=\"bank_number\"\n          placeholder=\"请输入用户名\"\n          :readonly=\"!isEdit\"\n          label-align=\"right\"\n        />\n      </div>\n      <div class=\"item flex_bet\" @click=\"handleShowModal\">\n        <p class=\"title\">银行名称</p>\n        <p class=\"gray\">{{bank_name}}</p>\n      </div>\n      <div class=\"item flex_bet\">\n        <p class=\"title\">真实姓名</p>\n        <van-field\n          v-model=\"user_name\"\n          placeholder=\"请输入用户名\"\n          :readonly=\"!isEdit\"\n          label-align=\"right\"\n        />\n      </div>\n    </div>\n\n    <van-button\n      type=\"default\"\n      @click=\"handleBtn\"\n      :class=\"isEdit?'btn':'normalBtn'\"\n    >{{isEdit?'保存':'编辑'}}</van-button>\n    <!-- 弹窗组件 -->\n    <van-dialog\n      v-model=\"editModal\"\n      :title=\"type\"\n      show-cancel-button\n      @confirm=\"handleConfirmUserInfo\"\n      :beforeClose=\"beforeClose\"\n    >\n      <van-picker :default-index=\"0\" title=\"选择银行\" :columns=\"allBankListName\" @change=\"onChange\" />\n    </van-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  components: {},\n  data() {\n    return {\n      editModal: false,\n      bank_number: '',\n      bank_name: '',\n      user_name: '',\n      isEdit: false,\n      type: '',\n      modalVal: ''\n    }\n  },\n  methods: {\n    // 编辑银行卡\n    editBank() {\n      let { id } = this.$route.query\n      let { bank_number, bank_name, user_name } = this\n\n      this.$store.dispatch('editBank', {\n        id,\n        bank_number,\n        bank_name,\n        user_name\n      })\n    },\n    handleBtn() {\n      // 如果为编辑状态下\n      let { id } = this.$route.query\n      id = id * 1\n      if (this.isEdit) {\n        console.log('保存')\n        let result = this.checkInput()\n        if (!result) {\n          this.$toast('请填写完整内容')\n          return\n        }\n        if (id > 0) {\n          this.editBank()\n        } else {\n          this.addBank()\n        }\n      }\n      this.isEdit = !this.isEdit\n    },\n    // 新增英航卡\n    addBank() {\n      let { bank_number, bank_name, user_name } = this\n\n      this.$store.dispatch('addBank', {\n        bank_number,\n        bank_name,\n        user_name\n      })\n    },\n    // 获取银行卡信息\n\n    getBankInfo() {\n      let { id } = this.$route.query\n      this.$store.dispatch('getBankInfo', {\n        id\n      })\n    },\n    handleShowModal(e) {\n      if (!this.isEdit) return\n      this.editModal = true\n    },\n    handleConfirmUserInfo(d) {},\n    onChange(picker, value, index) {\n      this.modalVal = value\n    },\n    beforeClose(a, d) {\n      if (a === 'cancel') {\n        d()\n      } else if (a === 'confirm') {\n        this.bank_name = this.modalVal || this.allBankListName[0]\n        d()\n      }\n    },\n    getAllBankList() {\n      this.$store.dispatch('getBankAllList')\n    },\n    queryBankInfo() {\n      let { id } = this.$route.query\n      id = id * 1\n      if (id >= 0) {\n        this.getBankInfo()\n      }\n    },\n    checkInput() {\n      let { bank_number, bank_name, user_name } = this\n      let obj = {\n        bank_number,\n        bank_name,\n        user_name\n      }\n\n      for (let k in obj) {\n        if (!obj[k]) {\n          console.log(k)\n          return false\n        }\n        return true\n      }\n    }\n  },\n  watch: {\n    allBankList(l) {},\n    bankCard(d) {\n   let { bank_number, bank_name, user_name } = d\n   this.bank_name = bank_name\n   this.bank_number = bank_number\n   this.user_name = user_name\n    }\n  },\n  computed: {\n    \n    bankCard() {\n      return this.$store.state.bankCard\n    },\n    allBankList() {\n      return this.$store.state.allBankList\n    },\n    allBankListName() {\n      return (\n        this.allBankList.length && this.allBankList.map(item => item.bank_name)\n      )\n    }\n  },\n  mounted() {\n    // 获取银行卡的列表\n    this.getAllBankList()\n    // 获取单个银行卡信息\n    this.queryBankInfo()\n  }\n}\n</script>\n<style scoped>\n.list_content {\n  background: #fff;\n  border-bottom: 1px solid rgba(210, 210, 210, 1);\n}\n.img {\n  width: 1rem;\n  height: 1rem;\n}\n.item {\n  /* height: 1.32rem; */\n  background: rgba(255, 255, 255, 1);\n  border-top: 1px solid rgba(210, 210, 210, 1);\n  font-size: 0.4rem;\n  padding: 0 0.4rem;\n  height: 1.7rem;\n  line-height: 1.7rem;\n}\n.gray {\n  color: #999;\n}\n.title {\n  color: #222;\n  width: 4rem;\n}\n.van-cell {\n  border: 1px solid #d6d6d6;\n  border-radius: 0.0667rem;\n  margin-top: 0.2rem;\n  text-align: center;\n}\n.btn {\n  width: 9rem;\n  margin: 0.3rem auto;\n  display: block;\n  color: #fff;\n  background: #e70002;\n}\n.normalBtn {\n  width: 9rem;\n  margin: 0.3rem auto;\n  display: block;\n}\n.normalBtn .van-button__text {\n  color: #222;\n}\n.van-button__text {\n  color: #fff;\n}\n.van-cell {\n  border: none;\n}\n</style>"]}]}