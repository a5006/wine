{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/EditAddr.vue?vue&type=style&index=0&id=faa21456&scoped=true&lang=css&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/EditAddr.vue","mtime":1574253931000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmxpc3RfY29udGVudCB7CiAgYmFja2dyb3VuZDogI2ZmZjsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyMTAsIDIxMCwgMjEwLCAxKTsKfQouaW1nIHsKICB3aWR0aDogMXJlbTsKICBoZWlnaHQ6IDFyZW07Cn0KLml0ZW0gewogIC8qIGhlaWdodDogMS4zMnJlbTsgKi8KICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDEpOwogIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDIxMCwgMjEwLCAyMTAsIDEpOwogIGZvbnQtc2l6ZTogMC40cmVtOwogIHBhZGRpbmc6IDAgMC40cmVtOwogIGhlaWdodDogMS43cmVtOwogIGxpbmUtaGVpZ2h0OiAxLjdyZW07Cn0KLmdyYXkgewogIGNvbG9yOiAjOTk5Owp9Ci50aXRsZSB7CiAgY29sb3I6ICMyMjI7CiAgd2lkdGg6IDRyZW07Cn0KLnZhbi1jZWxsIHsKICBib3JkZXI6IDFweCBzb2xpZCAjZDZkNmQ2OwogIGJvcmRlci1yYWRpdXM6IDAuMDY2N3JlbTsKICBtYXJnaW4tdG9wOiAwLjJyZW07CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5idG4gewogIHdpZHRoOiA5cmVtOwogIG1hcmdpbjogMC4zcmVtIGF1dG87CiAgZGlzcGxheTogYmxvY2s7CiAgY29sb3I6ICNmZmY7CiAgYmFja2dyb3VuZDogI2U3MDAwMjsKfQoubm9ybWFsQnRuIHsKICB3aWR0aDogOXJlbTsKICBtYXJnaW46IDAuM3JlbSBhdXRvOwogIGRpc3BsYXk6IGJsb2NrOwp9Ci5ub3JtYWxCdG4gLnZhbi1idXR0b25fX3RleHQgewogIGNvbG9yOiAjMjIyOwp9Ci52YW4tYnV0dG9uX190ZXh0IHsKICBjb2xvcjogI2ZmZjsKfQoudmFuLWNlbGwgewogIGJvcmRlcjogbm9uZTsKfQoudGV4dGFyZWEgewogIGhlaWdodDogYXV0bzsKfQo="},{"version":3,"sources":["EditAddr.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditAddr.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"list\">\n    <Gheader title=\"地址管理\" back=\"1\" />\n    <div class=\"list_content\">\n      <!-- 收件人 -->\n      <div class=\"item flex_bet\">\n        <p class=\"title\">收件人</p>\n        <van-field v-model=\"name\" placeholder=\"请输入收件人\" :readonly=\"!isEdit\" label-align=\"right\" />\n      </div>\n      <!-- 电话 -->\n      <div class=\"item flex_bet\">\n        <p class=\"title\">电话</p>\n        <van-field v-model=\"mobile\" placeholder=\"请输入电话\" :readonly=\"!isEdit\" label-align=\"right\" />\n      </div>\n      <!-- 所在地区 -->\n      <div class=\"item flex\" @click=\"handleShowModal\">\n        <p class=\"title\">所在地区</p>\n        <p class=\"gray\">{{cityData}}</p>\n      </div>\n      <!-- 地区详情 -->\n      <div class=\"item flex_bet textarea\">\n        <!-- <p class=\"title\">收件人</p> -->\n        <van-field\n          v-model=\"address\"\n          placeholder=\"请输入详细地址\"\n          :readonly=\"!isEdit\"\n          label-align=\"right\"\n          type=\"textarea\"\n        />\n      </div>\n      <!-- 是否默认地址 -->\n      <div class=\"item flex_bet\">\n        <p class=\"title\">是否默认地址</p>\n        <van-switch\n          :disabled=\"!isEdit\"\n          v-model=\"defaultVal\"\n          active-color=\"#e70002\"\n          inactive-color=\"#fff\"\n        />\n      </div>\n    </div>\n\n    <van-button\n      type=\"default\"\n      @click=\"handleBtn\"\n      :class=\"isEdit?'btn':'normalBtn'\"\n    >{{isEdit?'保存':'编辑'}}</van-button>\n    <van-button v-if=\"id\" type=\"default\" class=\"normalBtn\" @click=\"handleDel\">删除</van-button>\n    <!-- 弹窗组件 -->\n\n    <van-popup v-model=\"showModal\" position=\"bottom\">\n      <van-area @cancel=\"closeModal\" @confirm=\"chooseArea\" :area-list=\"areaList\" />\n    </van-popup>\n  </div>\n</template>\n<script>\nimport cityList from '../utils/addr'\nexport default {\n  components: {},\n  data() {\n    return {\n      areaList: cityList,\n      defaultVal: false,\n      showModal: false,\n      name: '',\n      mobile: '',\n      address: '',\n      province: '',\n      id:0,\n      city:\"\",\n      area: '',\n      cityData: '',\n      isEdit: false,\n      type: '',\n      modalVal: ''\n    }\n  },\n  methods: {\n    handleClean(){\n      this.name = \"\"\nthis.mobile = \"\"\nthis.address = \"\"\nthis.province = \"\"\nthis.area = \"\"\nthis.city = \"\"\nthis.cityData = \"\"\nthis.modalVal = \"\"\n    },\n    // 关闭\n    closeModal() {\n      this.showModal = false\n    },\n    // 选择地区\n    chooseArea(arr) {\n      let nameArr = arr.map(item => item.name)\n      let province = (this.province = nameArr[0])\n      let area = (this.area = nameArr[1])\n      let city = (this.city = nameArr[2])\n      this.cityData = `${province}-${area}-${city}`\n\n      this.showModal = false\n    },\n    // 删除\n    handleDel() {\n      this.$dialog\n        .confirm({\n          title: '确定删除吗'\n        })\n        .then(() => {\n          // on confirm\n          this.delAddr()\n          this.handleClean()\n     \n        })\n        .catch(() => {\n          // on cancel\n        })\n    },\n\n    delAddr() {\n      let { id } = this.$route.query\n      this.$store.dispatch('delAddr',{id})\n    },\n    handleBtn() {\n      // 如果为编辑状态下\n\n      if (this.isEdit) {\n        console.log('保存')\n        let result = this.checkInput()\n        if (!result) {\n          this.$toast('请填写完整内容')\n          return\n        }\n        this.handleSave()\n      }\n      this.isEdit = !this.isEdit\n    },\n    handleSave() {\n      let { id } = this.$route.query\n      let type = id * 1 > 0 ? 'editAddr' : 'addAddr'\n\n      let { name, mobile, address, province, area, city, defaultVal } = this\n      this.$store.dispatch(type, {\n        id,\n        name,\n        mobile,\n        address,\n        province,\n        area,\n        city,\n        default: defaultVal ? 1 : 0\n      })\n    },\n\n    // addAddr() {\n    //     let { id } = this.$route.query\n    //   let { name, mobile, address, province, area, city, defaultVal } = this\n\n    //   this.$store.dispatch('editAddr', {\n    //     id,\n    //     name,\n    //     mobile,\n    //     address,\n    //     province,\n    //     area,\n    //     city,\n    //     default: defaultVal ? 1 : 0\n    //   })\n    // },\n    // 获取银行卡信息\n\n    getAddrInfo() {\n      let { id } = this.$route.query\n      this.$store.dispatch('getAddr', {\n        id\n      })\n    },\n    handleShowModal(e) {\n      if (!this.isEdit) return\n      this.showModal = true\n    },\n    handleConfirmUserInfo(d) {},\n    onChange(picker, value, index) {\n      this.modalVal = value\n    },\n    beforeClose(a, d) {\n      if (a === 'cancel') {\n        d()\n      } else if (a === 'confirm') {\n        this.mobile = this.modalVal\n        d()\n      }\n    },\n    //  查询地址信息\n    queryAddrInfo() {\n      let { id } = this.$route.query\n      id = id * 1\n      if (id >= 0) {\n        this.getAddrInfo()\n      }\n    },\n    // 校验输入\n    checkInput() {\n      let { name, mobile, address } = this\n      let obj = {\n        name,\n        mobile,\n        address\n      }\n\n      for (let k in obj) {\n        if (!obj[k]) {\n          console.log(k)\n          return false\n        }\n        return true\n      }\n    }\n  },\n  watch: {\n    cityArea(e) {\n      this.cityData = e\n    },\n    defaultVal(e) {\n      console.log(e)\n    },\n    addrInfo(d) {\n      console.log(d)\n      let { name, mobile, address, city, area, province } = d\n      this.mobile = mobile\n      this.name = name\n      this.address = address\n      this.defaultVal = Boolean(d.default * 1)\n      this.province = province\n      this.city = city\n      this.area = area\n      console.log(this.defaultVal)\n    }\n  },\n  computed: {\n    addrInfo() {\n      return this.$store.state.addrInfo\n    },\n    cityArea() {\n      let { province, area, city } = this\n      return `${province}-${area}-${city}`\n    }\n    // addrInfoListName() {\n    //   return (\n    //     this.addrInfoList.length && this.addrInfoList.map(item => item.mobile)\n    //   )\n    // }\n  },\n  mounted() {\n    // 获取单个银行卡信息\n    this.id = this.$route.query.id\n    this.queryAddrInfo()\n  }\n}\n</script>\n<style scoped>\n.list_content {\n  background: #fff;\n  border-bottom: 1px solid rgba(210, 210, 210, 1);\n}\n.img {\n  width: 1rem;\n  height: 1rem;\n}\n.item {\n  /* height: 1.32rem; */\n  background: rgba(255, 255, 255, 1);\n  border-top: 1px solid rgba(210, 210, 210, 1);\n  font-size: 0.4rem;\n  padding: 0 0.4rem;\n  height: 1.7rem;\n  line-height: 1.7rem;\n}\n.gray {\n  color: #999;\n}\n.title {\n  color: #222;\n  width: 4rem;\n}\n.van-cell {\n  border: 1px solid #d6d6d6;\n  border-radius: 0.0667rem;\n  margin-top: 0.2rem;\n  text-align: center;\n}\n.btn {\n  width: 9rem;\n  margin: 0.3rem auto;\n  display: block;\n  color: #fff;\n  background: #e70002;\n}\n.normalBtn {\n  width: 9rem;\n  margin: 0.3rem auto;\n  display: block;\n}\n.normalBtn .van-button__text {\n  color: #222;\n}\n.van-button__text {\n  color: #fff;\n}\n.van-cell {\n  border: none;\n}\n.textarea {\n  height: auto;\n}\n</style>"]}]}