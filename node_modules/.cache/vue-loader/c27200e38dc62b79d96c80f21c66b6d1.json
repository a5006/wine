{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/recieveList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/recieveList.vue","mtime":1574575458948},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBSZWNlaXZlQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL1JlY2VpdmVDYXJkJwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgUmVjZWl2ZUNhcmQKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBbXSwKICAgICAgbWVudUxpc3Q6IFsKICAgICAgICB7IHRpdGxlOiAn5Y+v5o+Q6LSnJyB9LAogICAgICAgIHsgdGl0bGU6ICflvoXlj5HotKcnIH0sCiAgICAgICAgeyB0aXRsZTogJ+W+heaUtui0pycgfSwKICAgICAgICB7IHRpdGxlOiAn5bey5a6M5oiQJyB9CiAgICAgIF0sCiAgICAgIGFjdGl2ZTowLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBzdGFydDogMCwKICAgICAgbGltaXQ6IDEwLAogICAgICB0b3RhbDogMCwKCQkJCQkJYnRuOicnCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBxdWVyeU9yZGVyTGlzdCgpIHsKICAgICAgbGV0IHsgc3RhcnQsIGxpbWl0IH0gPSB0aGlzCiAgICAgIGxldCBwYXRoID0gewogICAgICAgICAgMCA6ICdteS90aGJsL2t0aC9saXN0JywKICAgICAgICAgIDEgOiAnbXkvdGhibC9kZmgvbGlzdCcsCiAgICAgICAgICAyIDogJ215L3RoYmwvZHNoL2xpc3QnLAogICAgICAgICAgMyA6ICdteS90aGJsL3l3Yy9saXN0JwogICAgICB9W3RoaXMuYWN0aXZlXTsKCQkJCQkJdGhpcy5idG4gPXsKCQkJCQkJCSAgMCA6ICfmj5DotKcnLAoJCQkJCQkJCQkxIDogJycsCgkJCQkJCQkJCTIgOiAn56Gu6K6k5pS26LSnJywKCQkJCQkJCQkJMyA6ICcnCgkJCQkJCX1bdGhpcy5hY3RpdmVdCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeVJlY2VpdmVMaXN0JywgewogICAgICAgICAgICBzdGFydCwKICAgICAgICAgICAgbGltaXQsCiAgICAgICAgICAgIHBhdGgKICAgICAgfSkKICAgIH0sCiAgICAvLyDlj6/mj5DotKflkozlvoXmlLbotKfnirbmgIHvvIzngrnlh7vmjInpkq7op6blj5Hkuovku7YKICAgIGhhbmRsZShkKXsKCQkJCQkJbGV0IHBhdGggPSB7CgkJCQkJCQkwIDogJ215L3RoYmwvc3F0aCcsCgkJCQkJCQkyIDogJ215L3RoYmwvcWRzaCcKCQkJCQkJfVt0aGlzLmFjdGl2ZV0KCQkJCQkJdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ29wZXJhdGVPcmRlcicsIHsKCQkJCQkJICAgICAgcGF0aCwKCQkJCQkJCQkJCQkJb3JkZXJfaWQ6ZAoJCQkJCQl9KQogICAgfSwKICAgIG9uTG9hZCgpIHsKICAgICAgdGhpcy5xdWVyeU9yZGVyTGlzdCgpCiAgICAgIHRoaXMuc3RhcnQgKz0gdGhpcy5saW1pdAogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgfSwKICAgIHN3aXRjaFRhYigpIHsKICAgICAgdGhpcy5yZXNldFF1ZXJ5KCkKICAgIH0sCiAgICByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnN0YXJ0ID0gMAogICAgICB0aGlzLmxpc3QgPSBbXQogICAgICAvLyB0aGlzLmxpc3QgPSBbXQogICAgICAvLyB0aGlzLmxvYWRpbmcgPWZhbHNlCiAgICAgIHRoaXMucXVlcnlPcmRlckxpc3QoKQogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYW5kbGVPcmRlcigpewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuaGFuZGxlT3JkZXIKICAgIH0sCiAgICByZWNlaXZlTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnJlY2VpdmVMaXN0CiAgICB9LAoJCQkJb3BlcmF0ZU9yZGVyKCkgewoJCQkJICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUub3BlcmF0ZU9yZGVyCgkJCQl9CiAgfSwKICB3YXRjaDogewogICAgLy8g5aaC5p6c5pON5L2c5LqG5bCx6KaB5Yi35paw6aG16Z2iCiAgICBoYW5kbGVPcmRlcjp7CiAgICAgIGhhbmRsZXIoZCl7CiAgICAgICAgaWYoZC5kYXRhKXsKICAgICAgICAgIHRoaXMucXVlcnlPcmRlckxpc3QoKQogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDp0cnVlLAogICAgfSwKICAgIHJlY2VpdmVMaXN0KGQpIHsKICAgICAgbGV0IHsgbGlzdCwgbnVtcyB9ID0gZAogICAgICBsaXN0ID0gbGlzdC5tYXAoaXRlbSA9PiB7CiAgICAgICAgaXRlbS5pbWcgPSB0aGlzLmZvcm1hdEltZyhpdGVtLmdvb2RzX2NvdmVyKQogICAgICAgIGl0ZW0uZ2V0VGltZSA9IHRoaXMuZm9ybWF0RGF0ZShpdGVtLmN0aW1lKQogICAgICAgIGl0ZW0uZW5kVGltZSA9IGlzTmFOKGl0ZW0uZXRpbWUgKiAxMDAwKSA/IG51bGwgOiBpdGVtLmV0aW1lICogMTAwMAogICAgICAgIHJldHVybiBpdGVtCiAgICAgIH0pCiAgICAgIHRoaXMubGlzdCA9IFsuLi50aGlzLmxpc3QsIC4uLmxpc3RdCiAgICAgIHRoaXMudG90YWwgPSBudW1zICogMQogICAgICBpZiAodGhpcy5saXN0Lmxlbmd0aCA+PSB0aGlzLnRvdGFsKSB7CgkJCQkJCQljb25zb2xlLmxvZygneWVzJykKICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZQogICAgICB9CiAgICB9LAoJCQkJb3BlcmF0ZU9yZGVyKGQpewoJCQkJCQlsZXQgc3VjY2Vzc01lc3NhZ2UgPSB7CgkJCQkJCQkwIDogJ+aPkOi0p+eUs+ivt+W3suaPkOS6pO+8jOetieW+heWPkei0p35+JywKCQkJCQkJCTIgOiAn5bey56Gu6K6k5pS26LSn77yM5oSf6LCi5oKo55qE5oOg6aG+fn4nCgkJCQkJCX1bdGhpcy5hY3RpdmVdCgkJCQkJCWlmKGQuZGF0YSl7CgkJCQkJCQkJdGhpcy4kZGlhbG9nLmFsZXJ0KHsKCQkJCQkJCQkgICAgICBtZXNzYWdlIDogc3VjY2Vzc01lc3NhZ2UKCQkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCQllbHNlewoJCQkJCQkJdGhpcy4kZGlhbG9nLmFsZXJ0KHsKCQkJCQkJCSAgICAgIG1lc3NhZ2U6ICfmj5DkuqTlpLHotKXvvIzor7fnqI3lkI7ph43or5UnCgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJfSwKICAgIGFjdGl2ZShhKSB7CiAgICAgIGlmIChhICE9IDAgJiYgdGhpcy5zb3VyY2UgPT0gJzMnKSB7CiAgICAgICAgdGhpcy5zb3VyY2UgPSAnMScKICAgICAgfQogICAgfSwKICAgIHNvdXJjZSgpIHsKICAgICAgdGhpcy5yZXNldFF1ZXJ5KCkKICAgIH0KICB9LAogIG1vdW50ZWQoKXsKICAgIHRoaXMuYWN0aXZlID0gdGhpcy4kcm91dGUucXVlcnkuYWN0aXZlfHwwCiAgfSwKfQo="},{"version":3,"sources":["recieveList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"recieveList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"提货办理\" back=\"1\" />\n    <!-- tabs -->\n    <van-tabs v-model=\"active\" sticky @click=\"switchTab\">\n      <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in menuList\" :key=\"item.title\"></van-tab>\n    </van-tabs>\n    <!-- 列表 -->\n    <div class=\"list pad_container\">\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\" van-clearfix>\n\t\t\t\t\t\t\t\t<div class=\"list_item\" v-for=\"item in list\" :key=\"item.order_id\">\n\t\t\t\t\t\t\t\t\t<ReceiveCard\n\t\t\t\t\t\t\t\t\t\t:desc=\"item.goods_attr\"\n\t\t\t\t\t\t\t\t\t\t:title=\"item.goods_name\"\n\t\t\t\t\t\t\t\t\t\t:id=\"item.order_id\"\n\t\t\t\t\t\t\t\t\t\t:img=\"formatImg(item.goods_cover)\"\n\t\t\t\t\t\t\t\t\t\t:price=\"item.goods_price\"\n\t\t\t\t\t\t\t\t\t\t:nums=\"item.th_nums\"\n\t\t\t\t\t\t\t\t\t\t:total=\"item.total_amount\"\n\t\t\t\t\t\t\t\t\t\t:btn='btn'\n\t\t\t\t\t\t\t\t\t\t@handle=\"handle\"\n\t\t\t\t\t\t\t\t\t/>\n        </div>\n      </van-list>\n    </div>\n  </div>\n</template>\n<script>\nimport ReceiveCard from '../components/ReceiveCard'\nexport default {\n  components: {\n    ReceiveCard\n  },\n  data() {\n    return {\n      list: [],\n      menuList: [\n        { title: '可提货' },\n        { title: '待发货' },\n        { title: '待收货' },\n        { title: '已完成' }\n      ],\n      active:0,\n      loading: false,\n      finished: false,\n      start: 0,\n      limit: 10,\n      total: 0,\n\t\t\t\t\t\tbtn:''\n    }\n  },\n  methods: {\n    queryOrderList() {\n      let { start, limit } = this\n      let path = {\n          0 : 'my/thbl/kth/list',\n          1 : 'my/thbl/dfh/list',\n          2 : 'my/thbl/dsh/list',\n          3 : 'my/thbl/ywc/list'\n      }[this.active];\n\t\t\t\t\t\tthis.btn ={\n\t\t\t\t\t\t\t  0 : '提货',\n\t\t\t\t\t\t\t\t\t1 : '',\n\t\t\t\t\t\t\t\t\t2 : '确认收货',\n\t\t\t\t\t\t\t\t\t3 : ''\n\t\t\t\t\t\t}[this.active]\n      this.$store.dispatch('queryReceiveList', {\n            start,\n            limit,\n            path\n      })\n    },\n    // 可提货和待收货状态，点击按钮触发事件\n    handle(d){\n\t\t\t\t\t\tlet path = {\n\t\t\t\t\t\t\t0 : 'my/thbl/sqth',\n\t\t\t\t\t\t\t2 : 'my/thbl/qdsh'\n\t\t\t\t\t\t}[this.active]\n\t\t\t\t\t\tthis.$store.dispatch('operateOrder', {\n\t\t\t\t\t\t      path,\n\t\t\t\t\t\t\t\t\t\t\t\torder_id:d\n\t\t\t\t\t\t})\n    },\n    onLoad() {\n      this.queryOrderList()\n      this.start += this.limit\n      this.loading = false\n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.queryOrderList()\n    },\n  },\n  computed: {\n    handleOrder(){\n      return this.$store.state.handleOrder\n    },\n    receiveList() {\n      return this.$store.state.receiveList\n    },\n\t\t\t\toperateOrder() {\n\t\t\t\t  return this.$store.state.operateOrder\n\t\t\t\t}\n  },\n  watch: {\n    // 如果操作了就要刷新页面\n    handleOrder:{\n      handler(d){\n        if(d.data){\n          this.queryOrderList()\n        }\n      },\n      deep:true,\n    },\n    receiveList(d) {\n      let { list, nums } = d\n      list = list.map(item => {\n        item.img = this.formatImg(item.goods_cover)\n        item.getTime = this.formatDate(item.ctime)\n        item.endTime = isNaN(item.etime * 1000) ? null : item.etime * 1000\n        return item\n      })\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n\t\t\t\t\t\t\tconsole.log('yes')\n        this.finished = true\n      } else {\n        this.finished = false\n      }\n    },\n\t\t\t\toperateOrder(d){\n\t\t\t\t\t\tlet successMessage = {\n\t\t\t\t\t\t\t0 : '提货申请已提交，等待发货~~',\n\t\t\t\t\t\t\t2 : '已确认收货，感谢您的惠顾~~'\n\t\t\t\t\t\t}[this.active]\n\t\t\t\t\t\tif(d.data){\n\t\t\t\t\t\t\t\tthis.$dialog.alert({\n\t\t\t\t\t\t\t\t      message : successMessage\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tthis.$dialog.alert({\n\t\t\t\t\t\t\t      message: '提交失败，请稍后重试'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t},\n    active(a) {\n      if (a != 0 && this.source == '3') {\n        this.source = '1'\n      }\n    },\n    source() {\n      this.resetQuery()\n    }\n  },\n  mounted(){\n    this.active = this.$route.query.active||0\n  },\n}\n</script>\n<style scoped>\n.radio_box {\n  width: 7rem;\n  margin: 0 auto;\n}\n.radio_item {\n  font-size: 0.4rem !important;\n}\n.header_con {\n  width: 9.5733rem;\n  height: 4.24rem;\n  background-color: rgba(231, 0, 2, 1);\n  background-image: url('../assets/icons/other/bg_d.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  margin: 0.2rem auto;\n}\n.header_con {\n  font-size: 0.4rem;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n.header_con p,\n.header_con div,\nsmall {\n  color: rgba(255, 255, 255, 0.753);\n}\n.list_item {\n  margin-bottom: 0.2rem;\n}\n.header_con .num {\n  color: #fff;\n  font-size: 0.96rem;\n}\n.header_con .right {\n  display: flex;\n  width: 2.0133rem;\n  height: 0.7467rem;\n  border: 0.0267rem solid rgba(255, 255, 255, 1);\n  border-radius: 0.3733rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n}\n.van-tab__pane {\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.1333rem;\n  overflow: hidden;\n  width: 9.6rem;\n  margin: 0.2rem auto;\n}\n.right::before {\n  content: '';\n  display: inline-block;\n  width: 0.4rem;\n  height: 0.4rem;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-image: url('../assets/icons/other/exchange.png');\n}\n.van-cell {\n  background: transparent;\n  padding: 0;\n  margin-bottom: 0.3rem;\n}\n</style>"]}]}