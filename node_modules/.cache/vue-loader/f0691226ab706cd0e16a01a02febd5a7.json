{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/TeamAchieve.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/TeamAchieve.vue","mtime":1574685909757},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBY2hpZXZlQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0FjaGlldmVDYXJkJwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQWNoaWV2ZUNhcmQKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVBY2hpZXZlOiAwLAogICAgICBhY3RpdmVMZXZlbDogMCwKICAgICAgeWVhcl9tb250aDogMCwKICAgICAgc3RhcnQ6IDAsCiAgICAgIGFjaGl2ZVRpdGxlTGlzdDogWwogICAgICAgIHsgaWQ6IDAsIHZhbHVlOiAwIH0sCiAgICAgICAgeyBpZDogMSwgdmFsdWU6IDAgfSwKICAgICAgICB7IGlkOiAyLCB2YWx1ZTogMCB9CiAgICAgIF0sCiAgICAgIG1lbnVMaXN0OiBbCiAgICAgICAgeyB0aXRsZTogJ+mbtuWUruS4mue7qScgfSwKICAgICAgICB7IHRpdGxlOiAn5Luj55CG5Lia57upJyB9LAogICAgICAgIHsgdGl0bGU6ICfmgLvkuJrnu6knLCBkaXNhYmxlZDogdHJ1ZSB9CiAgICAgIF0sCiAgICAgIGxldmVsTWVudUxpc3Q6IFsKICAgICAgICB7IHRpdGxlOiAn5oiR55qEJyB9LAogICAgICAgIHsgdGl0bGU6ICfkuIDnuqcnIH0sCiAgICAgICAgLy8geyB0aXRsZTogJ+S6jOe6pycgfSwKICAgICAgICAvLyB7IHRpdGxlOiAn5LiJ57qnJyB9CiAgICAgIF0sCiAgICAgIHFzOiAnJywKICAgICAgeWVhck1vbnRoRGF0ZTogW10sCiAgICAgIHNlYXNvbkRhdGU6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgbGltaXQ6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgYWN0aXZlOiAwCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5blubTmnIjml6UKICAgIHF1ZXJ5WWVhck1vbnRoKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnlZZWFyTW9udGgnKQogICAgfSwKICAgIC8vIOiOt+WPluacn+aVsAogICAgcXVlcnlTZWFzb24oKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeVNlYXNvbicpCiAgICB9LAoKICAgIC8vIOWboumYn+aAu+S4mue7qQogICAgcXVlcnlUZWFtQWNoaWV2ZSgpIHsKICAgICAgbGV0IHsgeWVhcl9tb250aCwgcXMgfSA9IHRoaXMKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5VGVhbUFjaGlldmUnLCB7CiAgICAgICAgeWVhcl9tb250aCwKICAgICAgICBxcwogICAgICB9KQogICAgfSwKCiAgICBxdWVyeVRlYW1PcmRlckxpc3QoKSB7CiAgICAgIGxldCB7IHN0YXJ0LCBsaW1pdCwgeWVhcl9tb250aCwgcXMgfSA9IHRoaXMKICAgICAgY29uc29sZS5sb2coc3RhcnQpCiAgICAgIGlmICh5ZWFyX21vbnRoID09PSAwKSByZXR1cm4KICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAwOiAnc2VsZicsCiAgICAgICAgMTogJ2ZpcnN0JywKICAgICAgICAyOiAnc2Vjb25kJywKICAgICAgICAzOiAndGhyZWUnCiAgICAgIH0KICAgICAgdmFyIHNPYmogPSB7CiAgICAgICAgMDogMSwKICAgICAgICAxOiAzCiAgICAgIH0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5VGVhbU9yZGVyTGlzdCcsIHsKICAgICAgICBzdGFydCwKICAgICAgICB0eXBlOiBvYmpbdGhpcy5hY3RpdmVMZXZlbF0sCiAgICAgICAgbGltaXQsCiAgICAgICAgc291cmNlOiBzT2JqW3RoaXMuYWN0aXZlXSwKICAgICAgICB5ZWFyX21vbnRoLAogICAgICAgIHFzCiAgICAgIH0pCiAgICB9LAogICAgb25Mb2FkKCkgewogICAgICB0aGlzLnF1ZXJ5VGVhbU9yZGVyTGlzdCgpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhcnQpCiAgICAgIHRoaXMuc3RhcnQgKz0gdGhpcy5saW1pdAogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgfSwKICAgIGhhbmRsZVNlbGVjdCgpIHsKICAgICAgY29uc29sZS5sb2coMSkKICAgICAgdGhpcy5yZXNldFF1ZXJ5KCkKICAgIH0sCiAgICBzd2l0Y2hUYWIoKSB7CiAgICAgIHRoaXMucmVzZXRRdWVyeSgpCiAgICB9LAogICAgcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5zdGFydCA9IDAKICAgICAgdGhpcy5saXN0ID0gW10KICAgICAgLy8gdGhpcy5saXN0ID0gW10KICAgICAgLy8gdGhpcy5sb2FkaW5nID1mYWxzZQogICAgICB0aGlzLnF1ZXJ5VGVhbU9yZGVyTGlzdCgpCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g5bm05pyI5pelCiAgICB5ZWFyTW9udGgoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS55ZWFyTW9udGgKICAgIH0sCiAgICAvLyDmnJ/mlbAKICAgIHNlYXNvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNlYXNvbgogICAgfSwKICAgIHllYXJTZWFzb24oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeWVhck1vbnRoOiB0aGlzLnllYXJNb250aCwKICAgICAgICBzZWFzb246IHRoaXMuc2Vhc29uCiAgICAgIH0KICAgIH0sCiAgICAvLyDlm6LpmJ/kurrmlbAKICAgIHRlYW1BY2hpZXZlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudGVhbUFjaGlldmUKICAgIH0sCiAgICB0ZWFtTWVtYmVyT2JqKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudGVhbU9yZGVyTGlzdC5yZXN1bHQKICAgIH0sCiAgICB0eXBlKCkgewogICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgcmV0dXJuICd1c2UnCiAgICAgICAgY2FzZSAxOgogICAgICAgICAgcmV0dXJuICd1c2VkJwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHJldHVybiAnZXhwaXJlZCcKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICd1c2UnCiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvLyDlubTmnIjml6UKICAgIHllYXJNb250aChkKSB7CiAgICAgIHRoaXMueWVhck1vbnRoRGF0ZSA9IGQubWFwKGl0ZW0gPT4gewogICAgICAgIGl0ZW0udGV4dCA9IGl0ZW0ueWVhcl9tb250aAogICAgICAgIGl0ZW0udmFsdWUgPSBpdGVtLnllYXJfbW9udGgKICAgICAgICByZXR1cm4gaXRlbQogICAgICB9KQogICAgICB0aGlzLnllYXJfbW9udGggPSB0aGlzLnllYXJNb250aERhdGVbMF0udmFsdWUKICAgIH0sCiAgICAvLyDmnJ/mlbAKICAgIHNlYXNvbihkKSB7CiAgICAgIHRoaXMuc2Vhc29uRGF0ZSA9IGQubWFwKGl0ZW0gPT4gewogICAgICAgIGl0ZW0udGV4dCA9IGl0ZW0udGl0bGUKICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS50aXRsZQogICAgICAgIHJldHVybiBpdGVtCiAgICAgIH0pCiAgICAgIHRoaXMucXMgPSB0aGlzLnNlYXNvbkRhdGVbMF0udmFsdWUKICAgIH0sCiAgICB5ZWFyU2Vhc29uKGQpIHsKICAgICAgbGV0IHsgeWVhck1vbnRoLCBzZWFzb24gfSA9IGQKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoeWVhck1vbnRoKSAmJiBBcnJheS5pc0FycmF5KHNlYXNvbikpIHsKICAgICAgICB0aGlzLnF1ZXJ5VGVhbUFjaGlldmUoKQogICAgICAgIC8vIHRoaXMucXVlcnlUZWFtT3JkZXJMaXN0KCkKICAgICAgICAgICB0aGlzLnJlc2V0UXVlcnkoKQogICAgICB9CiAgICB9LAogICAgLy8g5Zui6Zif5Lia57upCiAgICB0ZWFtQWNoaWV2ZShkYXRhKSB7CiAgICAgIGlmICghZGF0YSkgcmV0dXJuCiAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSkKICAgICAgdGhpcy5hY2hpdmVUaXRsZUxpc3QgPSB0aGlzLmFjaGl2ZVRpdGxlTGlzdC5tYXAoKGl0ZW0sIGlkeCkgPT4gewogICAgICAgIGl0ZW0udmFsdWUgPSBkYXRhW2tleXNbaWR4XV0KICAgICAgICByZXR1cm4gaXRlbQogICAgICB9KQogICAgfSwKICAgIHRlYW1NZW1iZXJPYmooZCkgewogICAgICBjb25zb2xlLmxvZyhkLCfov5nph4zmmK9kJykKICAgICAgbGV0IHsgbGlzdCwgbnVtcyB9ID0gZAogICAgICBjb25zb2xlLmxvZyhsaXN0LCBudW1zKQogICAgICAgIHRoaXMub3JkZXJfZ29vZHMgPSBsaXN0Lm9yZGVyX2dvb2RzCiAgICAgIHRoaXMubGlzdCA9IFsuLi50aGlzLmxpc3QsIC4uLmxpc3RdCiAgICAgIHRoaXMudG90YWwgPSBudW1zICogMQogICAgICBpZiAodGhpcy5saXN0Lmxlbmd0aCA+PSB0aGlzLnRvdGFsKSB7CiAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWUKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QubGVuZ3RoLCB0aGlzLnRvdGFsKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5xdWVyeVllYXJNb250aCgpCiAgICB0aGlzLnF1ZXJ5U2Vhc29uKCkKICB9Cn0K"},{"version":3,"sources":["TeamAchieve.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TeamAchieve.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"团队业绩\" back=\"1\" />\n    <!-- 下拉列表 -->\n    <van-dropdown-menu>\n      <van-dropdown-item v-model=\"year_month\" :options=\"yearMonthDate\" @change=\"handleSelect\" />\n      <van-dropdown-item v-model=\"qs\" :options=\"seasonDate\" @change=\"handleSelect\" />\n    </van-dropdown-menu>\n\n    <!-- 业绩展示 -->\n    <div class=\"header_con\">\n      <!-- 业绩 -->\n      <div class=\"achieveBox flex_bet\">\n        <p class=\"item\" v-for=\"item in achiveTitleList\" :key=\"item.id\">￥{{formatPrice(item.value)}}</p>\n      </div>\n      <!-- tab -->\n      <van-tabs v-model=\"active\" @click=\"switchTab\">\n        <van-tab\n          class=\"con\"\n          :title=\"item.title\"\n          v-for=\"item in menuList\"\n          :key=\"item.title\"\n          :disabled=\"item.disabled\"\n        ></van-tab>\n      </van-tabs>\n      <router-link to=\"/myTeam\" tag=\"div\" class=\"router\">\n        <p>查看团队成员</p>\n        <van-icon name=\"arrow\" color=\"#E70002\" />\n      </router-link>\n    </div>\n\n    <!-- 第二个tab -->\n    <div class=\"top\">\n      <van-tabs v-model=\"activeLevel\" @click=\"switchTab\">\n        <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in levelMenuList\" :key=\"item.title\"></van-tab>\n      </van-tabs>\n\n      <!-- 列表 -->\n      <div class=\"list pad_container\">\n        <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n          <div class=\"list_item\" v-for=\"item in list\" :key=\"item.order_id\">\n            <AchieveCard\n              :img=\"formatImg(item.order_goods.goods_cover)\"\n              :price=\"formatPrice(item.order_goods.goods_price)\"\n              :title=\"item.order_goods.goods_name\"\n              :desc=\"item.order_goods.goods_attr\"\n              :num=\"item.order_goods.num\"\n              :ztr_name=\"item.ztr_name\"\n              :ztr_phone =\"item.ztr_phone\"\n              :pay_amount=\"formatPrice(item.pay_amount)\"\n              :zt_score=\"formatPrice(item.zt_score)\"\n            />\n          </div>\n        </van-list>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport AchieveCard from '../components/AchieveCard'\nexport default {\n  components: {\n    AchieveCard\n  },\n  data() {\n    return {\n      activeAchieve: 0,\n      activeLevel: 0,\n      year_month: 0,\n      start: 0,\n      achiveTitleList: [\n        { id: 0, value: 0 },\n        { id: 1, value: 0 },\n        { id: 2, value: 0 }\n      ],\n      menuList: [\n        { title: '零售业绩' },\n        { title: '代理业绩' },\n        { title: '总业绩', disabled: true }\n      ],\n      levelMenuList: [\n        { title: '我的' },\n        { title: '一级' },\n        // { title: '二级' },\n        // { title: '三级' }\n      ],\n      qs: '',\n      yearMonthDate: [],\n      seasonDate: [],\n      loading: false,\n      finished: false,\n      list: [],\n      limit: 10,\n      total: 0,\n      active: 0\n    }\n  },\n  methods: {\n    // 获取年月日\n    queryYearMonth() {\n      this.$store.dispatch('queryYearMonth')\n    },\n    // 获取期数\n    querySeason() {\n      this.$store.dispatch('querySeason')\n    },\n\n    // 团队总业绩\n    queryTeamAchieve() {\n      let { year_month, qs } = this\n      this.$store.dispatch('queryTeamAchieve', {\n        year_month,\n        qs\n      })\n    },\n\n    queryTeamOrderList() {\n      let { start, limit, year_month, qs } = this\n      console.log(start)\n      if (year_month === 0) return\n      let obj = {\n        0: 'self',\n        1: 'first',\n        2: 'second',\n        3: 'three'\n      }\n      var sObj = {\n        0: 1,\n        1: 3\n      }\n      this.$store.dispatch('queryTeamOrderList', {\n        start,\n        type: obj[this.activeLevel],\n        limit,\n        source: sObj[this.active],\n        year_month,\n        qs\n      })\n    },\n    onLoad() {\n      this.queryTeamOrderList()\n      console.log(this.start)\n      this.start += this.limit\n      this.loading = false\n    },\n    handleSelect() {\n      console.log(1)\n      this.resetQuery()\n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.queryTeamOrderList()\n    }\n  },\n  computed: {\n    // 年月日\n    yearMonth() {\n      return this.$store.state.yearMonth\n    },\n    // 期数\n    season() {\n      return this.$store.state.season\n    },\n    yearSeason() {\n      return {\n        yearMonth: this.yearMonth,\n        season: this.season\n      }\n    },\n    // 团队人数\n    teamAchieve() {\n      return this.$store.state.teamAchieve\n    },\n    teamMemberObj() {\n      return this.$store.state.teamOrderList.result\n    },\n    type() {\n      switch (this.active) {\n        case 0:\n          return 'use'\n        case 1:\n          return 'used'\n        case 2:\n          return 'expired'\n        default:\n          return 'use'\n      }\n    }\n  },\n  watch: {\n    // 年月日\n    yearMonth(d) {\n      this.yearMonthDate = d.map(item => {\n        item.text = item.year_month\n        item.value = item.year_month\n        return item\n      })\n      this.year_month = this.yearMonthDate[0].value\n    },\n    // 期数\n    season(d) {\n      this.seasonDate = d.map(item => {\n        item.text = item.title\n        item.value = item.title\n        return item\n      })\n      this.qs = this.seasonDate[0].value\n    },\n    yearSeason(d) {\n      let { yearMonth, season } = d\n      if (Array.isArray(yearMonth) && Array.isArray(season)) {\n        this.queryTeamAchieve()\n        // this.queryTeamOrderList()\n           this.resetQuery()\n      }\n    },\n    // 团队业绩\n    teamAchieve(data) {\n      if (!data) return\n      let keys = Object.keys(data)\n      this.achiveTitleList = this.achiveTitleList.map((item, idx) => {\n        item.value = data[keys[idx]]\n        return item\n      })\n    },\n    teamMemberObj(d) {\n      console.log(d,'这里是d')\n      let { list, nums } = d\n      console.log(list, nums)\n        this.order_goods = list.order_goods\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n        this.finished = true\n        console.log(this.list.length, this.total)\n      } else {\n        this.finished = false\n      }\n    }\n  },\n  mounted() {\n    this.queryYearMonth()\n    this.querySeason()\n  }\n}\n</script>\n<style scoped>\n.header_con {\n  margin: 0.2rem auto;\n  width: 9.5733rem;\n  height: 2.9867rem;\n  background: rgba(255, 255, 255, 1);\n  box-shadow: 0px 0.0267rem 0.08rem 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  overflow: hidden;\n  padding: 0.4rem;\n  box-sizing: border-box;\n}\n.item {\n  flex: 1;\n}\n.achieveBox p {\n  color: #e70002;\n  font-size: 0.4rem;\n  text-align: center;\n}\n.van-tab {\n  height: 0.4rem !important;\n}\n.van-tab span {\n  font-size: 0.3rem;\n}\n.router {\n  font-size: 0.4rem;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n.router p {\n  color: #e70002;\n}\n</style>"]}]}