{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/ExchangeMoney.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/ExchangeMoney.vue","mtime":1574345608000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBHcmFkZUNhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9HcmFkZUNhcmQnCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBHcmFkZUNhcmQKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWc6IGBodHRwczovL3NzMy5iZHN0YXRpYy5jb20vNzBjRnY4U2hfUTFZbnhHa3BvV0sxSEY2aGh5L2l0L3U9MzI2OTUwMzgxNywzOTY1OTYwOTImZm09MjYmZ3A9MC5qcGdgLAogICAgICBtb25leTogJzAnLAogICAgICBhdmFsaWFibGVNb25leTogJycsCiAgICAgIGxpc3Q6IFtdLAogICAgICBtZW51TGlzdDogW3sgdGl0bGU6ICflrqHmoLgnIH0sIHsgdGl0bGU6ICfmj5DnjrDkuK0nIH0sIHsgdGl0bGU6ICflt7Lmj5DnjrAnIH1dLAogICAgICBhY3RpdmU6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgc3RhcnQ6MCwKICAgICAgbGltaXQ6IDEwLAogICAgICB0b3RhbDogMAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5o+Q5Y+W6ZKxCiAgICBoYW5kbGVXaXRoZHJhd01vbmV5KCkgewogICAgICBsZXQgeyBtb25leSB9ID0gdGhpcwogICAgICBpZiAobW9uZXkgPCAxMDApIHsKICAgICAgICB0aGlzLiR0b2FzdCgn6YeR6aKd5LiN6IO95bCP5LqOMTAw5YWDJykKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgdGhpcy4kZGlhbG9nCiAgICAgICAgLmNvbmZpcm0oewogICAgICAgICAgdGl0bGU6ICfmj5DnjrAnLAogICAgICAgICAgbWVzc2FnZTogYOaYr+WQpuaPkOeOsCR7bW9uZXl95YWDYAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgLy8gb24gY29uZmlybQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3dpdGhkcmF3TW9uZXknLCB7CiAgICAgICAgICAgIG1vbmV5OiBtb25leSAqIDEwMAogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAvLyBvbiBjYW5jZWwKICAgICAgICB9KQogICAgfSwKICAgIC8vIOWboumYn+S6uuaVsAogICAgcXVlcnlNb25leSgpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldE1vbmV5R3JhZGUnKQogICAgfSwKCiAgICBxdWVyeU1vbmV5TGlzdCgpIHsKICAgICAgbGV0IHsgc3RhcnQsIGxpbWl0IH0gPSB0aGlzCiAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmUpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjb25zb2xlLmxvZyhzdGFydCkKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2ZXJpZnlNb25leScsIHsKICAgICAgICAgICAgc3RhcnQsCiAgICAgICAgICAgIGxpbWl0CiAgICAgICAgICB9KQogICAgICAgICAgcmV0dXJuCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeU1vbmV5TGlzdCcsIHsKICAgICAgICAgICAgc3RhcnQsCiAgICAgICAgICAgIHN0YXR1czogdGhpcy5hY3RpdmUsCiAgICAgICAgICAgIGxpbWl0CiAgICAgICAgICB9KQogICAgICAgICAgYnJlYWsKICAgICAgfQogICAgfSwKICAgIG9uTG9hZCgpIHsKICAgICAgdGhpcy5xdWVyeU1vbmV5TGlzdCgpCiAgICAgIHRoaXMuc3RhcnQgKz0gdGhpcy5saW1pdAogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgfSwKICAgIHN3aXRjaFRhYigpIHsKICAgICAgdGhpcy5yZXNldFF1ZXJ5KCkKICAgIH0sCiAgICByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnN0YXJ0ID0gMAogICAgICB0aGlzLmxpc3QgPSBbXQogICAgICAvLyB0aGlzLmxpc3QgPSBbXQogICAgICAvLyB0aGlzLmxvYWRpbmcgPWZhbHNlCiAgICAgIHRoaXMucXVlcnlNb25leUxpc3QoKQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOmSseWMheenr+WIhgogICAgbW9uZXlHcmFkZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm1vbmV5R3JhZGUKICAgIH0sCiAgICBtb25leUxpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5tb25leUxpc3QKICAgIH0sCiAgICB2ZXJpZnlNb25leSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnZlcmlmeU1vbmV5CiAgICB9LAogICAgd2l0aGRyYXdNb25leSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLndpdGhkcmF3TW9uZXkKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2ZXJpZnlNb25leShkKSB7CiAgICAgIGNvbnNvbGUubG9nKGQpCiAgICB9LAogICAgd2l0aGRyYXdNb25leShkKSB7CiAgICAgIGlmKGQuZGF0YSl7CiAgICAgICAgY29uc29sZS5sb2coJ+aPkOeOsCcpCiAgICAgICAgdGhpcy5xdWVyeU1vbmV5TGlzdCgpCiAgICAgICAgdGhpcy5xdWVyeU1vbmV5KCkKICAgICAgfQogICAgfSwKICAgIC8vIOS6uuaVsAogICAgbW9uZXlHcmFkZShkYXRhKSB7CiAgICAgIC8vICBjb25zb2xlLmxvZyhkYXRhKQogICAgICB0aGlzLmF2YWxpYWJsZU1vbmV5ID0gKGRhdGEubW9uZXkgKiAxKSAvIDEwMAogICAgfSwKICAgIG1vbmV5TGlzdChkKSB7CiAgICAgIGxldCB7IGxpc3QsIG51bXMgfSA9IGQKICAgICAgY29uc29sZS5sb2cobGlzdCwgbnVtcykKICAgICAgdGhpcy5saXN0ID0gWy4uLnRoaXMubGlzdCwgLi4ubGlzdF0KICAgICAgdGhpcy50b3RhbCA9IG51bXMgKiAxCiAgICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoID49IHRoaXMudG90YWwpIHsKICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdC5sZW5ndGgsIHRoaXMudG90YWwpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlCiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnF1ZXJ5TW9uZXkoKQogIH0KfQo="},{"version":3,"sources":["ExchangeMoney.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExchangeMoney.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"余额提取\" back=\"1\" />\n    <!-- 当前积分 -->\n    <div class=\"header_con\">\n      <div class=\"left\">\n        <p>提取金额</p>\n        <div class=\"flex money_box\">\n          ￥\n          <input class=\"num\" v-model=\"money\" placeholder type=\"number\" />\n        </div>\n        <small>可以提现金额￥{{avaliableMoney}}</small>\n      </div>\n      <div class=\"right\"></div>\n    </div>\n\n    <!-- 兑换积分 -->\n    <div class=\"exchange\" @click=\"handleWithdrawMoney\">立即兑换</div>\n\n    <!-- 类型 -->\n    <div class=\"top\">\n      <van-tabs v-model=\"active\" sticky @click=\"switchTab\">\n        <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in menuList\" :key=\"item.title\"></van-tab>\n      </van-tabs>\n\n      <!-- 列表 -->\n      <div class=\"main_content\">\n        <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n          <div class=\"list_item\" v-for=\"item in list\" :key=\"item.id\">\n            <GradeCard\n              :score=\"item.money/100\"\n              type=\"money\"\n              :status=\"item.status\"\n              :time=\"item.ctime\"\n              :after_score=\"item.remain/100\"\n              footer=\"余额￥\"\n            />\n          </div>\n        </van-list>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport GradeCard from '../components/GradeCard'\nexport default {\n  components: {\n    GradeCard\n  },\n  data() {\n    return {\n      img: `https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3269503817,396596092&fm=26&gp=0.jpg`,\n      money: '0',\n      avaliableMoney: '',\n      list: [],\n      menuList: [{ title: '审核' }, { title: '提现中' }, { title: '已提现' }],\n      active: 0,\n      loading: false,\n      finished: false,\n  start:0,\n      limit: 10,\n      total: 0\n    }\n  },\n  methods: {\n    // 提取钱\n    handleWithdrawMoney() {\n      let { money } = this\n      if (money < 100) {\n        this.$toast('金额不能小于100元')\n        return\n      }\n\n      this.$dialog\n        .confirm({\n          title: '提现',\n          message: `是否提现${money}元`\n        })\n        .then(() => {\n          // on confirm\n          this.$store.dispatch('withdrawMoney', {\n            money: money * 100\n          })\n        })\n        .catch(() => {\n          // on cancel\n        })\n    },\n    // 团队人数\n    queryMoney() {\n      this.$store.dispatch('getMoneyGrade')\n    },\n\n    queryMoneyList() {\n      let { start, limit } = this\n      switch (this.active) {\n        case 0:\n          console.log(start)\n          this.$store.dispatch('verifyMoney', {\n            start,\n            limit\n          })\n          return\n        default:\n          this.$store.dispatch('queryMoneyList', {\n            start,\n            status: this.active,\n            limit\n          })\n          break\n      }\n    },\n    onLoad() {\n      this.queryMoneyList()\n      this.start += this.limit\n      this.loading = false\n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.queryMoneyList()\n    }\n  },\n  computed: {\n    // 钱包积分\n    moneyGrade() {\n      return this.$store.state.moneyGrade\n    },\n    moneyList() {\n      return this.$store.state.moneyList\n    },\n    verifyMoney() {\n      return this.$store.state.verifyMoney\n    },\n    withdrawMoney() {\n      return this.$store.state.withdrawMoney\n    }\n  },\n  watch: {\n    verifyMoney(d) {\n      console.log(d)\n    },\n    withdrawMoney(d) {\n      if(d.data){\n        console.log('提现')\n        this.queryMoneyList()\n        this.queryMoney()\n      }\n    },\n    // 人数\n    moneyGrade(data) {\n      //  console.log(data)\n      this.avaliableMoney = (data.money * 1) / 100\n    },\n    moneyList(d) {\n      let { list, nums } = d\n      console.log(list, nums)\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n        this.finished = true\n        console.log(this.list.length, this.total)\n      } else {\n        this.finished = false\n      }\n    }\n  },\n  mounted() {\n    this.queryMoney()\n  }\n}\n</script>\n<style scoped>\n.header_con {\n  width: 9.5733rem;\n  height: 4.24rem;\n  /* background-color: rgba(231, 0, 2, 1); */\n  background-image: url('../assets/icons/other/bg_w.png');\n  background-repeat: no-repeat;\n  background-size: 100%;\n  background-position: center;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  margin: 0.2rem auto;\n  color: #e70002;\n}\n.header_con {\n  font-size: 0.4rem;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: 0.8rem;\n  box-sizing: border-box;\n}\n.header_con p,\n.header_con div,\nsmall {\n  color: #e70002;\n}\n.money_box {\n  font-size: 0.6rem;\n}\n.header_con .num,\n.van-field__control {\n  color: #e70002;\n  display: block;\n  font-size: 0.8rem;\n}\n.header_con .right {\n  display: flex;\n  width: 2.0133rem;\n  height: 0.7467rem;\n  border: 0.0267rem solid rgba(255, 255, 255, 1);\n  border-radius: 0.3733rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n}\n.van-tab__pane {\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.1333rem;\n  overflow: hidden;\n  width: 9.6rem;\n  margin: 0.2rem auto;\n}\n.right::before {\n  content: '';\n  display: inline-block;\n  width: 0.4rem;\n  height: 0.4rem;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-image: url('../assets/icons/other/exchange.png');\n}\n.exchange {\n  width: 9rem;\n  height: 1.3467rem;\n  text-align: center;\n  background: #e70002;\n  line-height: 1.3467rem;\n  margin: 0.2rem auto;\n  margin-top: 0.3rem;\n  color: #fff;\n  border-radius: 0.7rem;\n}\n.exNum {\n  color: #e70002;\n  font-size: 0.4rem;\n  padding: 0 0.4rem;\n}\n.main_content {\n  width: 9.4rem;\n  margin: 0 auto;\n  box-sizing: border-box;\n  background: #fff;\n  box-shadow: 0px 0.0267rem 0.08rem 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  padding: 0.2rem;\n  box-sizing: border-box;\n}\n</style>"]}]}