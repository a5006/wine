{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/RecieveList.vue?vue&type=style&index=0&id=82d35062&scoped=true&lang=css&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/RecieveList.vue","mtime":1574684716033},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yYWRpb19ib3ggewogIHdpZHRoOiA3cmVtOwogIG1hcmdpbjogMCBhdXRvOwp9Ci5yYWRpb19pdGVtIHsKICBmb250LXNpemU6IDAuNHJlbSAhaW1wb3J0YW50Owp9Ci5oZWFkZXJfY29uIHsKICB3aWR0aDogOS41NzMzcmVtOwogIGhlaWdodDogNC4yNHJlbTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIzMSwgMCwgMiwgMSk7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi9hc3NldHMvaWNvbnMvb3RoZXIvYmdfZC5wbmcnKTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBib3R0b207CiAgYm94LXNoYWRvdzogMHB4IDJweCA2cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7CiAgYm9yZGVyLXJhZGl1czogMC4ycmVtOwogIG1hcmdpbjogMC4ycmVtIGF1dG87Cn0KLmhlYWRlcl9jb24gewogIGZvbnQtc2l6ZTogMC40cmVtOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQouaGVhZGVyX2NvbiBwLAouaGVhZGVyX2NvbiBkaXYsCnNtYWxsIHsKICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjc1Myk7Cn0KLmxpc3RfaXRlbSB7CiAgbWFyZ2luLWJvdHRvbTogMC4ycmVtOwp9Ci5oZWFkZXJfY29uIC5udW0gewogIGNvbG9yOiAjZmZmOwogIGZvbnQtc2l6ZTogMC45NnJlbTsKfQouaGVhZGVyX2NvbiAucmlnaHQgewogIGRpc3BsYXk6IGZsZXg7CiAgd2lkdGg6IDIuMDEzM3JlbTsKICBoZWlnaHQ6IDAuNzQ2N3JlbTsKICBib3JkZXI6IDAuMDI2N3JlbSBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDEpOwogIGJvcmRlci1yYWRpdXM6IDAuMzczM3JlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoudmFuLXRhYl9fcGFuZSB7CiAgYm94LXNoYWRvdzogMHB4IDJweCA2cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7CiAgYm9yZGVyLXJhZGl1czogMC4xMzMzcmVtOwogIG92ZXJmbG93OiBoaWRkZW47CiAgd2lkdGg6IDkuNnJlbTsKICBtYXJnaW46IDAuMnJlbSBhdXRvOwp9Ci5yaWdodDo6YmVmb3JlIHsKICBjb250ZW50OiAnJzsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgd2lkdGg6IDAuNHJlbTsKICBoZWlnaHQ6IDAuNHJlbTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi9hc3NldHMvaWNvbnMvb3RoZXIvZXhjaGFuZ2UucG5nJyk7Cn0KLnZhbi1jZWxsIHsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICBwYWRkaW5nOiAwOwogIG1hcmdpbi1ib3R0b206IDAuM3JlbTsKfQo="},{"version":3,"sources":["RecieveList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RecieveList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"提货办理\" back=\"1\" />\n    <!-- tabs -->\n    <van-tabs v-model=\"active\" sticky @click=\"switchTab\">\n      <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in menuList\" :key=\"item.title\"></van-tab>\n    </van-tabs>\n    <!-- 列表 -->\n    <div class=\"list pad_container\">\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoad\"\n        van-clearfix\n      >\n        <div\n          class=\"list_item\"\n          v-for=\"item in list\"\n          :key=\"item.order_id\"\n          @click=\"navigate(item.order_id)\"\n        >\n          <ReceiveCard\n            :desc=\"item.goods_attr\"\n            :title=\"item.goods_name\"\n            :id=\"item.order_id\"\n            :img=\"formatImg(item.goods_cover)\"\n            :price=\"item.goods_price\"\n            :nums=\"item.th_nums\"\n            :total=\"formatPrice(item.total_amount)\"\n            :btn=\"btn\"\n            @handle=\"handle\"\n          />\n        </div>\n      </van-list>\n    </div>\n  </div>\n</template>\n<script>\nimport ReceiveCard from '../components/ReceiveCard'\nexport default {\n  components: {\n    ReceiveCard\n  },\n  data() {\n    return {\n      list: [],\n      menuList: [\n        { title: '可提货' },\n        { title: '待发货' },\n        { title: '待收货' },\n        { title: '已完成' }\n      ],\n      active: 0,\n      loading: false,\n      finished: false,\n      start: 0,\n      limit: 10,\n      total: 0,\n      btn: ''\n    }\n  },\n  methods: {\n    queryOrderList() {\n      let { start, limit } = this\n      let path = {\n        0: 'my/thbl/kth/list',\n        1: 'my/thbl/dfh/list',\n        2: 'my/thbl/dsh/list',\n        3: 'my/thbl/ywc/list'\n      }[this.active]\n      this.btn = {\n        0: '提货',\n        1: '',\n        2: '确认收货',\n        3: ''\n      }[this.active]\n      this.$store.dispatch('queryReceiveList', {\n        start,\n        limit,\n        path\n      })\n    },\n    // 可提货和待收货状态，点击按钮触发事件\n    navigate(id) {\n      this.$router.push({\n        name: 'receiveOrder',\n        params: {\n          active: this.active,\n          id\n        }\n      })\n    },\n    handle(d) {\n      // let path = {\n      //   0: 'my/thbl/sqth',\n      //   2: 'my/thbl/qdsh'\n      // }[this.active]\n      console.log(d)\n      switch (this.active) {\n        case 0:\n          this.$store.dispatch('deleveryGoods', {\n            order_id: d\n          })\n          break\n\n        default:\n          this.$store.dispatch('confirmRecieveGoods', {\n            order_id: d\n          })\n          break\n      }\n    },\n    onLoad() {\n      this.queryOrderList()\n      this.start += this.limit\n      this.loading = false\n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.queryOrderList()\n    }\n  },\n  computed: {\n    operateOrder() {\n      return this.$store.state.operateOrder\n    },\n    receiveList() {\n      return this.$store.state.receiveList\n    }\n  },\n  watch: {\n    // 如果操作了就要刷新页面\n    operateOrder: {\n      handler(d) {\n        let successMessage = {\n          0: '提货申请已提交，等待发货~~',\n          2: '已确认收货，感谢您的惠顾~~'\n        }[this.active]\n        if (d.data) {\n          this.queryOrderList()\n          console.log(d, 'suc')\n          this.$dialog.alert({\n            message: successMessage\n          })\n        } else {\n          this.$dialog.alert({\n            message: '提交失败，请稍后重试'\n          })\n        }\n        // console.log(d)\n        // if (d.data) {\n        //   console.log(d.data,'afsdd')\n        //   this.queryOrderList()\n        // }\n      },\n      deep: true\n    },\n    receiveList(d) {\n      let { list, nums } = d\n      list = list.map(item => {\n        item.img = this.formatImg(item.goods_cover)\n        item.getTime = this.formatDate(item.ctime)\n        item.endTime = isNaN(item.etime * 1000) ? null : item.etime * 1000\n        return item\n      })\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n        console.log('yes')\n        this.finished = true\n      } else {\n        this.finished = false\n      }\n    },\n    // operateOrder(d) {\n\n    // },\n    active(a) {\n      if (a != 0 && this.source == '3') {\n        this.source = '1'\n      }\n    },\n    source() {\n      this.resetQuery()\n    }\n  },\n  mounted() {\n    this.active = this.$route.query.active || 0\n  }\n}\n</script>\n<style scoped>\n.radio_box {\n  width: 7rem;\n  margin: 0 auto;\n}\n.radio_item {\n  font-size: 0.4rem !important;\n}\n.header_con {\n  width: 9.5733rem;\n  height: 4.24rem;\n  background-color: rgba(231, 0, 2, 1);\n  background-image: url('../assets/icons/other/bg_d.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  margin: 0.2rem auto;\n}\n.header_con {\n  font-size: 0.4rem;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n.header_con p,\n.header_con div,\nsmall {\n  color: rgba(255, 255, 255, 0.753);\n}\n.list_item {\n  margin-bottom: 0.2rem;\n}\n.header_con .num {\n  color: #fff;\n  font-size: 0.96rem;\n}\n.header_con .right {\n  display: flex;\n  width: 2.0133rem;\n  height: 0.7467rem;\n  border: 0.0267rem solid rgba(255, 255, 255, 1);\n  border-radius: 0.3733rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n}\n.van-tab__pane {\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.1333rem;\n  overflow: hidden;\n  width: 9.6rem;\n  margin: 0.2rem auto;\n}\n.right::before {\n  content: '';\n  display: inline-block;\n  width: 0.4rem;\n  height: 0.4rem;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-image: url('../assets/icons/other/exchange.png');\n}\n.van-cell {\n  background: transparent;\n  padding: 0;\n  margin-bottom: 0.3rem;\n}\n</style>"]}]}