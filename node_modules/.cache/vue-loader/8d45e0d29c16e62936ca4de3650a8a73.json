{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/TeamAchieve.vue?vue&type=style&index=0&id=5472caea&scoped=true&lang=css&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/TeamAchieve.vue","mtime":1574685909757},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5oZWFkZXJfY29uIHsKICBtYXJnaW46IDAuMnJlbSBhdXRvOwogIHdpZHRoOiA5LjU3MzNyZW07CiAgaGVpZ2h0OiAyLjk4NjdyZW07CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKTsKICBib3gtc2hhZG93OiAwcHggMC4wMjY3cmVtIDAuMDhyZW0gMHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7CiAgYm9yZGVyLXJhZGl1czogMC4ycmVtOwogIG92ZXJmbG93OiBoaWRkZW47CiAgcGFkZGluZzogMC40cmVtOwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KLml0ZW0gewogIGZsZXg6IDE7Cn0KLmFjaGlldmVCb3ggcCB7CiAgY29sb3I6ICNlNzAwMDI7CiAgZm9udC1zaXplOiAwLjRyZW07CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci52YW4tdGFiIHsKICBoZWlnaHQ6IDAuNHJlbSAhaW1wb3J0YW50Owp9Ci52YW4tdGFiIHNwYW4gewogIGZvbnQtc2l6ZTogMC4zcmVtOwp9Ci5yb3V0ZXIgewogIGZvbnQtc2l6ZTogMC40cmVtOwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwp9Ci5yb3V0ZXIgcCB7CiAgY29sb3I6ICNlNzAwMDI7Cn0K"},{"version":3,"sources":["TeamAchieve.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TeamAchieve.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader title=\"团队业绩\" back=\"1\" />\n    <!-- 下拉列表 -->\n    <van-dropdown-menu>\n      <van-dropdown-item v-model=\"year_month\" :options=\"yearMonthDate\" @change=\"handleSelect\" />\n      <van-dropdown-item v-model=\"qs\" :options=\"seasonDate\" @change=\"handleSelect\" />\n    </van-dropdown-menu>\n\n    <!-- 业绩展示 -->\n    <div class=\"header_con\">\n      <!-- 业绩 -->\n      <div class=\"achieveBox flex_bet\">\n        <p class=\"item\" v-for=\"item in achiveTitleList\" :key=\"item.id\">￥{{formatPrice(item.value)}}</p>\n      </div>\n      <!-- tab -->\n      <van-tabs v-model=\"active\" @click=\"switchTab\">\n        <van-tab\n          class=\"con\"\n          :title=\"item.title\"\n          v-for=\"item in menuList\"\n          :key=\"item.title\"\n          :disabled=\"item.disabled\"\n        ></van-tab>\n      </van-tabs>\n      <router-link to=\"/myTeam\" tag=\"div\" class=\"router\">\n        <p>查看团队成员</p>\n        <van-icon name=\"arrow\" color=\"#E70002\" />\n      </router-link>\n    </div>\n\n    <!-- 第二个tab -->\n    <div class=\"top\">\n      <van-tabs v-model=\"activeLevel\" @click=\"switchTab\">\n        <van-tab class=\"con\" :title=\"item.title\" v-for=\"item in levelMenuList\" :key=\"item.title\"></van-tab>\n      </van-tabs>\n\n      <!-- 列表 -->\n      <div class=\"list pad_container\">\n        <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n          <div class=\"list_item\" v-for=\"item in list\" :key=\"item.order_id\">\n            <AchieveCard\n              :img=\"formatImg(item.order_goods.goods_cover)\"\n              :price=\"formatPrice(item.order_goods.goods_price)\"\n              :title=\"item.order_goods.goods_name\"\n              :desc=\"item.order_goods.goods_attr\"\n              :num=\"item.order_goods.num\"\n              :ztr_name=\"item.ztr_name\"\n              :ztr_phone =\"item.ztr_phone\"\n              :pay_amount=\"formatPrice(item.pay_amount)\"\n              :zt_score=\"formatPrice(item.zt_score)\"\n            />\n          </div>\n        </van-list>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport AchieveCard from '../components/AchieveCard'\nexport default {\n  components: {\n    AchieveCard\n  },\n  data() {\n    return {\n      activeAchieve: 0,\n      activeLevel: 0,\n      year_month: 0,\n      start: 0,\n      achiveTitleList: [\n        { id: 0, value: 0 },\n        { id: 1, value: 0 },\n        { id: 2, value: 0 }\n      ],\n      menuList: [\n        { title: '零售业绩' },\n        { title: '代理业绩' },\n        { title: '总业绩', disabled: true }\n      ],\n      levelMenuList: [\n        { title: '我的' },\n        { title: '一级' },\n        // { title: '二级' },\n        // { title: '三级' }\n      ],\n      qs: '',\n      yearMonthDate: [],\n      seasonDate: [],\n      loading: false,\n      finished: false,\n      list: [],\n      limit: 10,\n      total: 0,\n      active: 0\n    }\n  },\n  methods: {\n    // 获取年月日\n    queryYearMonth() {\n      this.$store.dispatch('queryYearMonth')\n    },\n    // 获取期数\n    querySeason() {\n      this.$store.dispatch('querySeason')\n    },\n\n    // 团队总业绩\n    queryTeamAchieve() {\n      let { year_month, qs } = this\n      this.$store.dispatch('queryTeamAchieve', {\n        year_month,\n        qs\n      })\n    },\n\n    queryTeamOrderList() {\n      let { start, limit, year_month, qs } = this\n      console.log(start)\n      if (year_month === 0) return\n      let obj = {\n        0: 'self',\n        1: 'first',\n        2: 'second',\n        3: 'three'\n      }\n      var sObj = {\n        0: 1,\n        1: 3\n      }\n      this.$store.dispatch('queryTeamOrderList', {\n        start,\n        type: obj[this.activeLevel],\n        limit,\n        source: sObj[this.active],\n        year_month,\n        qs\n      })\n    },\n    onLoad() {\n      this.queryTeamOrderList()\n      console.log(this.start)\n      this.start += this.limit\n      this.loading = false\n    },\n    handleSelect() {\n      console.log(1)\n      this.resetQuery()\n    },\n    switchTab() {\n      this.resetQuery()\n    },\n    resetQuery() {\n      this.start = 0\n      this.list = []\n      // this.list = []\n      // this.loading =false\n      this.queryTeamOrderList()\n    }\n  },\n  computed: {\n    // 年月日\n    yearMonth() {\n      return this.$store.state.yearMonth\n    },\n    // 期数\n    season() {\n      return this.$store.state.season\n    },\n    yearSeason() {\n      return {\n        yearMonth: this.yearMonth,\n        season: this.season\n      }\n    },\n    // 团队人数\n    teamAchieve() {\n      return this.$store.state.teamAchieve\n    },\n    teamMemberObj() {\n      return this.$store.state.teamOrderList.result\n    },\n    type() {\n      switch (this.active) {\n        case 0:\n          return 'use'\n        case 1:\n          return 'used'\n        case 2:\n          return 'expired'\n        default:\n          return 'use'\n      }\n    }\n  },\n  watch: {\n    // 年月日\n    yearMonth(d) {\n      this.yearMonthDate = d.map(item => {\n        item.text = item.year_month\n        item.value = item.year_month\n        return item\n      })\n      this.year_month = this.yearMonthDate[0].value\n    },\n    // 期数\n    season(d) {\n      this.seasonDate = d.map(item => {\n        item.text = item.title\n        item.value = item.title\n        return item\n      })\n      this.qs = this.seasonDate[0].value\n    },\n    yearSeason(d) {\n      let { yearMonth, season } = d\n      if (Array.isArray(yearMonth) && Array.isArray(season)) {\n        this.queryTeamAchieve()\n        // this.queryTeamOrderList()\n           this.resetQuery()\n      }\n    },\n    // 团队业绩\n    teamAchieve(data) {\n      if (!data) return\n      let keys = Object.keys(data)\n      this.achiveTitleList = this.achiveTitleList.map((item, idx) => {\n        item.value = data[keys[idx]]\n        return item\n      })\n    },\n    teamMemberObj(d) {\n      console.log(d,'这里是d')\n      let { list, nums } = d\n      console.log(list, nums)\n        this.order_goods = list.order_goods\n      this.list = [...this.list, ...list]\n      this.total = nums * 1\n      if (this.list.length >= this.total) {\n        this.finished = true\n        console.log(this.list.length, this.total)\n      } else {\n        this.finished = false\n      }\n    }\n  },\n  mounted() {\n    this.queryYearMonth()\n    this.querySeason()\n  }\n}\n</script>\n<style scoped>\n.header_con {\n  margin: 0.2rem auto;\n  width: 9.5733rem;\n  height: 2.9867rem;\n  background: rgba(255, 255, 255, 1);\n  box-shadow: 0px 0.0267rem 0.08rem 0px rgba(0, 0, 0, 0.15);\n  border-radius: 0.2rem;\n  overflow: hidden;\n  padding: 0.4rem;\n  box-sizing: border-box;\n}\n.item {\n  flex: 1;\n}\n.achieveBox p {\n  color: #e70002;\n  font-size: 0.4rem;\n  text-align: center;\n}\n.van-tab {\n  height: 0.4rem !important;\n}\n.van-tab span {\n  font-size: 0.3rem;\n}\n.router {\n  font-size: 0.4rem;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n.router p {\n  color: #e70002;\n}\n</style>"]}]}