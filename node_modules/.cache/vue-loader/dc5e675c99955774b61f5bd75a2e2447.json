{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/GoodsList.vue?vue&type=style&index=0&id=f867836c&scoped=true&lang=css&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/views/GoodsList.vue","mtime":1574686859884},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRpbWUgewogIG1hcmdpbi1sZWZ0OiAwLjJyZW07Cn0KLml0ZW0gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB3aWR0aDogMC41cmVtOwogIG1hcmdpbi1yaWdodDogNXB4OwogIGNvbG9yOiAjZmZmOwogIGZvbnQtc2l6ZTogMC4xNnJlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U3MDAwMjsKfQouZGF0ZUNvdW50IHsKICBmb250LXNpemU6IDAuNHJlbTsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBtYXJnaW46IDAuMnJlbSAwOwp9Ci52YW4tY2VsbCB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgcGFkZGluZzogMDsKfQoucmVsYXRpdmUgewogIG1hcmdpbjogMC4xcmVtIDA7Cn0K"},{"version":3,"sources":["GoodsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GoodsList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Gheader :title=\"headerTitle\" back=\"1\" />\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\n      <div class=\"pad_container\">\n        <div class=\"flex dateCount\" v-if=\"time\">\n          <p>距离结束还有</p>\n          <van-count-down class=\"time\" :time=\"time\">\n            <template v-slot=\"timeData\">\n              <span class=\"item\">{{ timeData.hours }}</span>:\n              <span class=\"item\">{{ timeData.minutes }}</span>:\n              <span class=\"item\">{{ timeData.seconds }}</span>\n            </template>\n          </van-count-down>\n        </div>\n\n        <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"- 已经到底啦 -\" @load=\"onLoad\">\n          <van-cell v-for=\"(item) in goodsList\" :key=\"item.id\" style=\"padding:0;\">\n            <ShopCard\n              :key=\"item.id\"\n              :title=\"item.title\"\n              :img=\"item.img\"\n              :price=\"item.price\"\n              :bgImg=\"item.bgImg\"\n              :btnName=\"item.btnName\"\n              :tag=\"tag\"\n              :tagP=\"item.tagP\"\n              @choose=\"handleChoose(item.id)\"\n              @buy=\"handleChoose(item.id)\"\n            />\n          </van-cell>\n        </van-list>\n      </div>\n    </van-pull-refresh>\n  </div>\n</template>\n<script>\nimport ShopCard from '../components/ShopCard.vue'\nexport default {\n  components: {\n    ShopCard\n  },\n  data() {\n    return {\n      start: 0,\n      time: 0,\n      isLoading: false,\n      loading: false,\n      finished: false,\n      type: '',\n      listLen: '',\n      goodsList: []\n      // goodsList: [\n      //   {\n      //     id: 0,\n      //     title: '茅台迎宾53度茅台迎宾酒500ml 礼盒装酒厂直供',\n      //     img:\n      //       'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3730743024,3724797634&fm=26&gp=0.jpg',\n      //     tag: '需',\n      //     tagFullColor: true,\n      //     tagP: '3张代理权',\n      //     price: '2',\n      //     originPrice: 123,\n      //     bgImg: require('$a/icons/home/g_buy.png'),\n      //     btnName: '去抢购'\n      //   },\n      //   {\n      //     id: 1,\n\n      //     title: '茅台迎宾53度茅台迎宾酒500ml 礼盒装酒厂直供',\n      //     img:\n      //       'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3730743024,3724797634&fm=26&gp=0.jpg',\n      //     tag: '送',\n      //     tagP: '3张代理权',\n      //     price: '2',\n      //     bgImg: require('$a/icons/home/buy.png'),\n      //     btnName: '去抢购'\n      //   }\n      // ]\n    }\n  },\n  methods: {\n    handleChoose(id) {\n      let {type,lsq_period_id,dlq_period_id} = this.$route.query\n      this.$router.push({\n        path:'/goodsDetail',\n        query:{\n          type,\n          goods_id:id,\n          period_id:lsq_period_id||dlq_period_id\n        }\n      })\n    },\n\n    onLoad() {\n      this.queryInfo()\n      this.start += 10\n      this.loading = false\n    },\n    handleJumpTo(item) {\n      this.$router.push({\n        path: item.link\n      })\n    },\n    onRefresh() {\n      setTimeout(() => {\n        this.$toast('刷新成功')\n        this.isLoading = false\n      }, 500)\n    },\n    queryInfo() {\n      const obj = {\n        retail: () => {\n          let { lsq_period_id } = this.$route.query\n          this.$store.dispatch('getRetailList', {\n            start: this.start,\n            limit: '10',\n            period_id: lsq_period_id\n          })\n        },\n        agent: () => {\n          let { dlq_period_id } = this.$route.query\n          this.$store.dispatch('getAgentList', {\n            start: this.start,\n            limit: '10',\n            period_id: dlq_period_id\n          })\n        },\n        special:()=>{\n          this.$store.dispatch('getSpecialList', {\n            start: this.start,\n            limit: '10',\n          })\n        },\n               member:()=>{\n          this.$store.dispatch('getMemberGoodsList', {\n            start: this.start,\n            limit: '10',\n          })\n        },\n      }\n      obj[this.type]()\n    },\n  },\n  computed: {\n    headerTitle(){\n  switch (this.type) {\n        case 'agent':\n          return '代理区列表'\n        case 'retail':\n          return '零售区列表'\n          case 'member':\n            return '会员区列表'\n            case 'special':\n              return '个性定制区列表'\n        default:\n          return '列表'\n      }\n    },\n    // 监听对象\n    tag() {\n      switch (this.type) {\n        case 'agent':\n          return '需'\n        case 'retail':\n          return '送'\n        default:\n          return ' '\n      }\n    },\n    dataObj() {\n      let type = this.type\n      var store = {\n        retail: this.$store.state.retailGoodsList,\n        agent: this.$store.state.agentGoodsList,\n        special:this.$store.state.specialGoodsList,\n        member:this.$store.state.memberGoodsList\n      }\n      let obj = {}\n      if (store[type]) {\n        obj = store[type]\n\n        if (Object.keys(obj).length) {\n          let list = obj.list.map(item => {\n            item.img = this.formatImg(item.cover)\n            item.bgImg = require('$a/icons/home/buy.png')\n            item.btnName = '去抢购'\n            if(this.type==='special'){\n              item.btnName = '联系客服'\n            }\n            item.tagP = `${item.dlq_add_nums || item.dlq_need_nums}张代理券`\n            if(!item. dlq_add_nums&&!item.dlq_need_nums){\n              item.tag=null\n              item.tagP=\"\"\n            }\n            item.title = item.goods_name\n            item.price = item.price*1/100\n            return item\n          })\n          return { list, len: obj.nums }\n        }\n      }\n\n      return null\n    }\n  },\n  watch: {\n    //对数组监听\n    dataObj(e) {\n      if (!e) return\n      let { list, len } = e\n      this.goodsList = [...this.goodsList, ...list]\n      this.listLen = len * 1\n// 停止加载\n      if (this.goodsList.length >= this.listLen) {\n        this.finished = true\n      }\n    }\n  },\n  mounted() {\n    let { type, time } = this.$route.query\n    this.time = time * 1\n    this.type = type\n    this.onLoad()\n  }\n}\n</script>\n<style scoped>\n.time {\n  margin-left: 0.2rem;\n}\n.item {\n  display: inline-block;\n  width: 0.5rem;\n  margin-right: 5px;\n  color: #fff;\n  font-size: 0.16rem;\n  text-align: center;\n  background-color: #e70002;\n}\n.dateCount {\n  font-size: 0.4rem;\n  justify-content: center;\n  margin: 0.2rem 0;\n}\n.van-cell {\n  background: transparent;\n  padding: 0;\n}\n.relative {\n  margin: 0.1rem 0;\n}\n</style>"]}]}