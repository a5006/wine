{"remainingRequest":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/components/SkuModal.vue?vue&type=style&index=0&id=768bcfc0&scoped=true&lang=css&","dependencies":[{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/src/components/SkuModal.vue","mtime":1574686079966},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/silan/Desktop/code/code/partTime/wine/svnapp/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCnAgewogIGZvbnQtc2l6ZTogMC4zNzMzcmVtOwp9Ci5idXkgewogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiAxcmVtOwogIG1hcmdpbjogYXV0bzsKICB3aWR0aDogNS4wMTMzcmVtOwogIGhlaWdodDogMS4zODY3cmVtOwogIGNvbG9yOiAjZmZmOwogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vYXNzZXRzL2ljb25zL2hvbWUvYnV5LnBuZycpOwogIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXI6IG5vbmU7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBwYWRkaW5nLXJpZ2h0OiAwLjRyZW07CiAgZm9udC1zaXplOiAwLjM2cmVtOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZm9udC1zaXplOiAwLjVyZW07CiAgbWFyZ2luOiAxcmVtIGF1dG87Cn0KLml0ZW0gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBtYXJnaW46IDAuMXJlbTsKICBib3JkZXI6IDAuMDI2N3JlbSBzb2xpZCByZ2JhKDE5MywgMTkzLCAxOTMsIDEpOwogIGZvbnQtc2l6ZTogMC4zNnJlbTsKICBib3JkZXItcmFkaXVzOiAwLjJyZW07CiAgcGFkZGluZzogMC4ycmVtIDAuNHJlbTsKfQouYWN0aXZlIHsKICBib3JkZXI6IDAuMDI2N3JlbSBzb2xpZCAjZmYwMDAwOwp9Cg=="},{"version":3,"sources":["SkuModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SkuModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <van-popup v-model=\"modal\" position=\"bottom\" @closed=\"handleCls\">\n      <SkuCard\n        :img=\"img\"\n        :num=\"ticket\"\n        :price=\"formatPrice(skuData.price)\"\n        :title=\"skuData.goods_name\"\n        :tickP=\"ticketP\"\n      />\n\n      <div class=\"pad_container\">\n        <!-- 度数 -->\n        <p>度数</p>\n        <div class=\"desc\">\n          <div\n            :class=\"activeCls(idx)\"\n            v-for=\"(item,idx) in list\"\n            :key=\"item\"\n            @click=\"handleChoose(item,idx)\"\n          >{{item}}</div>\n        </div>\n        <!-- 选择数量 -->\n        <div class=\"count flex_bet\">\n          <p>购买数量</p>\n          <van-stepper v-model=\"count\" button-size=\".6rem\" />\n        </div>\n        <!-- 抢购俺妞妞 -->\n        <div class=\"buy\" @click=\"createOrder\">立即抢购</div>\n      </div>\n    </van-popup>\n  </div>\n</template>\n<script>\nimport SkuCard from '../components/SkuCard'\nexport default {\n  components: {\n    SkuCard\n  },\n  props: {\n    show: {\n      default: false\n    },\n    skuData: {}\n  },\n  data() {\n    return {\n      img: '',\n      modal: false,\n      count: 1,\n      ticket: '',\n      name: '',\n      attr_id: '',\n      active: 0,\n      currentItem: {},\n      ticketP: '',\n      list: []\n    }\n  },\n  watch: {\n    show(s) {\n      this.modal = s\n    },\n    skuData(d) {\n      this.list = d.goods_attr['1021'].children.map(item => {\n        return item.name\n      })\n      console.log(this.skuData, '‘阿萨德')\n      d.goods_img = d.goods_img.split('|||')[0]\n      this.img = this.formatImg(d.goods_img)\n      this.ticket = d.dlq_add_nums || d.dlq_need_nums\n      if (d.dlq_add_nums) {\n        this.ticketP = '赠送代理资格券'\n      } else if (d.dlq_need_nums) {\n        this.ticketP = '需要代理资格券'\n      }\n\n      let first =     this.skuData.goods_attr['1021'].children[0]\n     this.name = first.name\n          this.attr_id = first.attr_id\n          this.img = this.formatImg(first.cover)\n  \n    }\n  },\n  methods: {\n    handleCls() {\n      this.modal = false\n      this.$emit('handleCls', false)\n    },\n    handleChoose(name, idx) {\n      this.skuData.goods_attr['1021'].children.map(item => {\n        if (item.name === name) {\n          console.log(item)\n          // 选择\n          this.name = item.name\n          this.attr_id = item.attr_id\n          this.img = this.formatImg(item.cover)\n        }\n      })\n\n      this.active = idx\n    },\n    activeCls(idx) {\n      if (this.active === idx) {\n        return 'item active'\n      } else {\n        return 'item'\n      }\n    },\n    // 获取是零售区还是会员区还是代理区\n    getSource() {\n      let { type } = this.$route.query\n      switch (type) {\n        case 'retail':\n          return 1\n        case 'agent':\n          return 3\n        case 'member':\n          return 2\n        default:\n          return ''\n      }\n    },\n    createOrder() {\n      let source = this.getSource()\n      let {\n        goods_id,\n        price,\n        period_id,\n        dlq_add_nums,\n        dlq_need_nums,\n        goods_name\n      } = this.skuData\n      //订单号\n      let attr_id = this.attr_id\n      let buy_num = this.count\n      let name = this.name\n      let img = this.img\n      let order_num = new Date().getTime()\n      //带参数到订单\n      this.$router.push({\n        name: 'order',\n        query: {\n          source,\n          goods_id,\n          price,\n          period_id,\n          attr_id,\n          name,\n          dlq_add_nums,\n          dlq_need_nums,\n          img,\n          goods_name,\n          buy_num,\n          order_num\n        }\n      })\n    }\n  },\n  mounted() {}\n}\n</script>\n<style scoped>\np {\n  font-size: 0.3733rem;\n}\n.buy {\n  left: 0;\n  right: 0;\n  bottom: 1rem;\n  margin: auto;\n  width: 5.0133rem;\n  height: 1.3867rem;\n  color: #fff;\n  background-image: url('../assets/icons/home/buy.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  background-color: transparent;\n  border: none;\n  box-sizing: border-box;\n  padding-right: 0.4rem;\n  font-size: 0.36rem;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.5rem;\n  margin: 1rem auto;\n}\n.item {\n  display: inline-block;\n  margin: 0.1rem;\n  border: 0.0267rem solid rgba(193, 193, 193, 1);\n  font-size: 0.36rem;\n  border-radius: 0.2rem;\n  padding: 0.2rem 0.4rem;\n}\n.active {\n  border: 0.0267rem solid #ff0000;\n}\n</style>"]}]}