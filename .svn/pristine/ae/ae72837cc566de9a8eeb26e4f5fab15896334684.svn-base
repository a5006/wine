(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-73fc7f3e"],{4527:function(t,i,e){"use strict";e.r(i),e("c1b2"),e("7298");var s=e("b8a6"),a={props:{title:{},desc:{},total:{},num:{default:1},img:{},notTotal:{default:!0},price:{},type:{},id:{},btn:{}},methods:{handle:function(t){this.$emit("handle",t)}}},n=(e("f792"),e("4e82")),r={components:{ReceiveCard:Object(n.a)(a,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"itemBox"},[e("div",{staticClass:"itemDetail"},[e("img",{staticClass:"itemImg",attrs:{src:t.img}}),e("div",{staticClass:"itemDesc"},[e("div",{staticClass:"itemTitle"},[t._v(t._s(t.title))]),e("div",{staticClass:"attr"},[t._v(t._s(t.desc))]),e("div",{staticClass:"num"},[t._v("x"+t._s(t.num))]),e("div",{staticClass:"clear"}),e("div",{staticClass:"count"},[t._v("共"+t._s(t.num)+"件商品，合计:"),e("span",{staticClass:"cost"},[t._v("¥"+t._s(t.total))])])])]),t.btn?e("div",{staticClass:"btn",on:{click:function(i){return t.handle(t.id)}}},[t._v(t._s(t.btn))]):t._e(),t.btn?e("div",{staticClass:"clear"}):t._e()])}),[],!1,null,"45df00c7",null).exports},data:function(){return{list:[],menuList:[{title:"可提货"},{title:"待发货"},{title:"待收货"},{title:"已完成"}],active:0,loading:!1,finished:!1,start:0,limit:10,total:0,btn:""}},methods:{queryOrderList:function(){var t=this.start,i=this.limit,e={0:"my/thbl/kth/list",1:"my/thbl/dfh/list",2:"my/thbl/dsh/list",3:"my/thbl/ywc/list"}[this.active];this.btn={0:"提货",1:"",2:"确认收货",3:""}[this.active],this.$store.dispatch("queryReceiveList",{start:t,limit:i,path:e})},handle:function(t){var i={0:"my/thbl/sqth",2:"my/thbl/qdsh"}[this.active];this.$store.dispatch("operateOrder",{path:i,order_id:t})},onLoad:function(){this.queryOrderList(),this.start+=this.limit,this.loading=!1},switchTab:function(){this.resetQuery()},resetQuery:function(){this.start=0,this.list=[],this.queryOrderList()}},computed:{handleOrder:function(){return this.$store.state.handleOrder},receiveList:function(){return this.$store.state.receiveList},operateOrder:function(){return this.$store.state.operateOrder}},watch:{handleOrder:{handler:function(t){t.data&&this.queryOrderList()},deep:!0},receiveList:function(t){var i=this,e=t.list,a=t.nums;e=e.map((function(t){return t.img=i.formatImg(t.goods_cover),t.getTime=i.formatDate(t.ctime),t.endTime=isNaN(1e3*t.etime)?null:1e3*t.etime,t})),this.list=[].concat(Object(s.a)(this.list),Object(s.a)(e)),this.total=1*a,this.list.length>=this.total?this.finished=!0:this.finished=!1},operateOrder:function(t){var i={0:"提货申请已提交，等待发货~~",2:"已确认收货，感谢您的惠顾~~"}[this.active];t.data?this.$dialog.alert({message:i}):this.$dialog.alert({message:"提交失败，请稍后重试"})},active:function(t){0!=t&&"3"==this.source&&(this.source="1")},source:function(){this.resetQuery()}},mounted:function(){this.active=this.$route.query.active||0}},c=(e("d626"),Object(n.a)(r,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("Gheader",{attrs:{title:"提货办理",back:"1"}}),e("van-tabs",{attrs:{sticky:""},on:{click:t.switchTab},model:{value:t.active,callback:function(i){t.active=i},expression:"active"}},t._l(t.menuList,(function(t){return e("van-tab",{key:t.title,staticClass:"con",attrs:{title:t.title}})})),1),e("div",{staticClass:"list pad_container"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","van-clearfix":""},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.list,(function(i){return e("div",{key:i.order_id,staticClass:"list_item"},[e("ReceiveCard",{attrs:{desc:i.goods_attr,title:i.goods_name,id:i.order_id,img:t.formatImg(i.goods_cover),price:i.goods_price,nums:i.th_nums,total:i.total_amount,btn:t.btn},on:{handle:t.handle}})],1)})),0)],1)],1)}),[],!1,null,"5200b5f5",null));i.default=c.exports},6833:function(t,i,e){},b8a6:function(t,i,e){"use strict";function s(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.d(i,"a",(function(){return s}))},d626:function(t,i,e){"use strict";var s=e("dbc8");e.n(s).a},dbc8:function(t,i,e){},f792:function(t,i,e){"use strict";var s=e("6833");e.n(s).a}}]);